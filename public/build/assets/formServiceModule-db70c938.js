import{x as c}from"./app-7e0eada9.js";import{S as o}from"./snackbar-alerts-6b28df32.js";import{p as u}from"./Checkbox-e2b7c125.js";import"./admin-table-component-d7c08093.js";import"./ucfirst-206f84d9.js";import"./CustomLink-d2b02c25.js";import"./VDivider-99007ce3.js";const h={namespaced:!0,state:{currentObject:{},valid:!0,validateFlag:!1},mutations:{setCurrentObject(e,r){e.currentObject=r},resetCurrentObject(e){e.currentObject={}},validate(e){e.validateFlag=!0,setTimeout(()=>e.validateFlag=!1,10)}},getters:{getCurrentObject:e=>e.currentObject},actions:{async redirect({rootState:e}){let r="";Object.entries(u).forEach(t=>{t[1].forEach(s=>{s.tablename==e.route.path.split("/")[2]&&(r=`/${t[0]}`,e.route.params.parent_id&&(r=`${r}/${e.route.params.parent_id}`))})});let a=e.route.params.parent_id?"":`#${e.route.path.split("/")[2]}`;e.router.push(`/admin-panel${r}${a}`)},async add({commit:e,dispatch:r,rootState:a},t){if(Object.keys(t).some(s=>Number.isInteger(s))){console.error("Obiekt formData ma numeryczne klucze!!!"),this.$store.commit("toast",o.error);return}c.post(`/api/${a.route.path.split("/")[2]}/add`,{...t.formData}).then(()=>{e("toast",o.success,{root:!0}),e("resetCurrentObject"),r("redirect")}).catch(s=>{e("toast",o.error,{root:!0}),console.error(s)})},async edit({commit:e,dispatch:r,rootState:a},{formData:t,options:s={redirect:!0}}){if(Object.keys(t).some(i=>Number.isInteger(i))){console.error("Obiekt formData ma numeryczne klucze!!!"),this.$store.commit("toast",o.error);return}c.put(`/api/${a.route.path.split("/")[2]}/edit`,t).then(()=>{e("toast",o.success,{root:!0}),s.redirect&&r("redirect")}).catch(i=>{e("toast",o.error,{root:!0}),console.error(i)})},async updateDeletedFile({dispatch:e,getters:r,rootState:a}){a.route.params.id&&e("edit",{formData:r.getCurrentObject,options:{redirect:!1}})}}};export{h as default};
