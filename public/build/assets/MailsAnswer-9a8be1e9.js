import{_ as j,x as r,s,o as k,f as C,l as i,k as o,b as m,t as y}from"./app-7e0eada9.js";import{V as M,a as T,b as U,c as z}from"./VCardTitle-612be7de.js";import{V as A}from"./VTextarea-6e3da498.js";import{S as B,V as N,b as R,T as S,a as W}from"./VDivider-99007ce3.js";import{V as D,a as F}from"./VCol-881ced2b.js";import{V as P}from"./VCardActions-cc1d1bdd.js";import"./ucfirst-206f84d9.js";function E(t){return window.location.origin+"/storage/attachments/"+t}const I={components:{VMain:M,SvgVue:B,VTextarea:A,VContainer:T,VForm:U,VCardActions:P,VBtn:N,VDivider:R,TextField:S,VCard:W,VCardTitle:z,VRow:D,VCol:F},data(){return{mail:{},loading:!1,answer:{answer_message:"",answer:1,id:this.$route.params.id,subject:"",email:""},files:[],rules:{titleRules:[t=>!!t||"To pole jest wymagane!"]},valid:!0,attachments:[]}},watch:{mail(){this.answer.subject=this.mail.subject,this.answer.email=this.mail.email}},methods:{getMail(){r.get(`/api/mails/get_one/${this.$route.params.id}`).then(t=>{this.mail=t.data})},getAttachment(t){return E(t)},sendMail(t){t.delete=1,r.post("/api/mails/send",t).then(e=>{console.log(e),this.loading=!1,e.data.error!=null?this.$store.commit("toast",e.data.error.message):e.data.success!=null&&this.$store.commit("toast",e.data.success.message),this.$store.commit("toast","Pomyślnie wysłano odpowiedź!")}).catch(e=>{console.log(e),this.loading=!1,this.$store.commit("toast","Przepraszamy, nie udało się wysłać maila...")})},editMail(){this.valid&&(this.loading=!0,r.put("/api/mails/answer",this.answer).then(t=>{this.sendMail(t.data)}).catch(t=>{console.error(t),this.loading=!1,this.$store.commit("toast","Nie udało się zapisać wiadomości, skontaktuj się z Administratorem")}))}},created(){this.getMail()}},O={class:"pt-4 font-weight-bold panel-title-header first-color"},q={class:"pa-5"},G=m("span",null,"Wyślij",-1),H=m("span",null,"Wróć",-1);function J(t,e,K,L,a,f){const V=s("v-card-title"),d=s("v-divider"),c=s("v-textarea"),u=s("v-col"),n=s("text-field"),v=s("v-row"),p=s("svg-vue"),_=s("v-btn"),g=s("v-card-actions"),w=s("v-form"),h=s("v-card"),b=s("v-container"),x=s("v-main");return k(),C(x,null,{default:i(()=>[o(b,null,{default:i(()=>[o(h,null,{default:i(()=>[o(V,{class:"justify-content-center"},{default:i(()=>[m("h2",O," Odpowiedź na mail o temacie '"+y(a.mail.subject)+"' ",1)]),_:1}),o(d,{class:"mt-0"}),o(w,{ref:"form",modelValue:a.valid,"onUpdate:modelValue":e[7]||(e[7]=l=>a.valid=l)},{default:i(()=>[o(v,{class:"px-5"},{default:i(()=>[o(u,{cols:"12",md:"8"},{default:i(()=>[o(c,{rules:a.rules.titleRules,modelValue:a.answer.answer_message,"onUpdate:modelValue":e[0]||(e[0]=l=>a.answer.answer_message=l),label:"Twoja wiadomość"},null,8,["rules","modelValue"])]),_:1}),o(u,{cols:"12",md:"4"},{default:i(()=>[m("div",q,[o(n,{disabled:"",modelValue:a.mail.name,"onUpdate:modelValue":e[1]||(e[1]=l=>a.mail.name=l),label:"Imię i nazwisko"},null,8,["modelValue"]),o(n,{disabled:"",modelValue:a.mail.email,"onUpdate:modelValue":e[2]||(e[2]=l=>a.mail.email=l),label:"E-mail"},null,8,["modelValue"]),o(n,{disabled:"",modelValue:a.mail.phone,"onUpdate:modelValue":e[3]||(e[3]=l=>a.mail.phone=l),label:"Telefon"},null,8,["modelValue"]),o(n,{disabled:"",modelValue:a.mail.subject,"onUpdate:modelValue":e[4]||(e[4]=l=>a.mail.subject=l),label:"Temat"},null,8,["modelValue"]),o(c,{disabled:"",modelValue:a.mail.message,"onUpdate:modelValue":e[5]||(e[5]=l=>a.mail.message=l),label:"Wiadomość"},null,8,["modelValue"])])]),_:1})]),_:1}),o(d,{class:"mb-0"}),o(g,{class:"pa-4"},{default:i(()=>[o(_,{loading:a.loading,disabled:!a.valid,color:"primary",class:"mr-2",onClick:f.editMail},{icon:i(()=>[o(p,{icon:"check"})]),default:i(()=>[G]),_:1},8,["loading","disabled","onClick"]),o(_,{color:"error",class:"mr-2",onClick:e[6]||(e[6]=l=>t.$router.go(-1))},{icon:i(()=>[o(p,{icon:"close"})]),default:i(()=>[H]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}const ae=j(I,[["render",J]]);export{ae as default};
