import{_,P as k,x as p,s as v,o as c,c as l,b as e,F as w,d as b,k as d,i as y,w as m,E as h,e as f,t as u,p as D,f as A,y as x,z as L}from"./app-7e0eada9.js";import M from"./contactLinksModule-cbf77197.js";import z from"./snackbarAlertsModule-97fe6cba.js";const I={components:{Picture:k},data(){return{contact:window.global.config.contact,settings:window.global.config.settings,formData:{name:"",email:"",subject:"",message:"",rodo1:!1,rodo2:!1},formDataDefault:{name:"",email:"",subject:"",message:"",rodo1:!1,rodo2:!1},recaptchaSiteKey:window.location.origin.includes("localhost")?"6Lf3c-AUAAAAAFZvqKdtC2NCcYG_wVDSBccSYJBP":"6LeyGAsiAAAAAKPkdvmjIaVmMc3VLtez7v4Exj_L"}},computed:{contactLinks(){var s;return((s=this.$store.state.ContactLinks)==null?void 0:s.contactLinks)||[]}},methods:{validation(){return Object.values(this.formData).every(t=>t.constructor==String?!!t:!0)?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(this.formData.email)?this.formData.rodo1?!0:(this.$store.commit("toast","Proszę zaznaczyć potrzebne rodo!"),!1):(this.$store.commit("toast","Email jest nieprawidłowy!"),!1):(this.$store.commit("toast","Wszystkie pola muszą być uzupełnione!"),!1)},prepareBlockHtml(s){return s.replace("{","<b>").replace("}","</b>")},prepareRodo(s){return s==null?void 0:s.replaceAll("{NAZWA_FIRMY}",this.settings.company).replaceAll("{ADRES_FIRMY}",`${this.contact.address}, ${this.contact.zip_code} ${this.contact.city}`)},async sendMail(s){await p.post("/api/mails/send",s).then(t=>{console.log(t),this.$store.commit("loading",!1),t.data.error!=null?this.$store.commit("toast",t.data.error.message):t.data.success!=null&&this.$store.commit("toast",t.data.success.message),t.status==200&&(this.$store.commit("toast","Pomyślnie wysłano wiadomość!"),this.formData=this.formDataDefault)}).catch(t=>{console.log(t),this.$store.commit("loading",!1),this.$store.commit("toast",this.$store.getters.snackbarAlerts.mail_error)})},saveMail(){if(!this.validation())return;this.$store.commit("loading",!0);const s=!1;window.grecaptcha.ready(function(){window.grecaptcha.execute(this.recaptchaSiteKey,{action:"submit"}).then(function(t){if(!t){this.$store.commit("toast",this.$store.getters.snackbarAlerts.recaptcha_error),this.$store.commit("loading",!1);return}p.post("/api/mails/add",{...this.formData,response:s}).then(i=>{if(console.log(i),i.data.error!=null){this.$store.commit("toast",i.data.error.message),this.$store.commit("loading",!1);return}else this.sendMail(i.data)}).catch(i=>{console.log(i),this.$store.commit("loading",!1),this.$store.commit("toast",this.$store.getters.snackbarAlerts.error)})})})},appendRecaptchaScript(){const s=document.createElement("script");s.src=`https://www.google.com/recaptcha/api.js?render=${this.recaptchaSiteKey}`,document.body.appendChild(s)}},mounted(){this.appendRecaptchaScript()},created(){this.$store.hasModule("contactLinks")||this.$store.registerModule("ContactLinks",M),this.$store.hasModule("snackbarAlerts")||this.$store.registerModule("snackbarAlerts",z),this.contactLinks.length===0&&this.$store.dispatch("ContactLinks/contactLinks")}},g=s=>(x("data-v-67bbdee8"),s=s(),L(),s),$={class:"contact"},S={key:0,class:"links-container"},C={class:"links"},V=["href","target"],j=["innerHTML"],B=["innerHTML"],P=g(()=>e("h2",{class:"contact-form-title"},[f("Formularz "),e("b",null,"kontakowy")],-1)),R={class:"inputs"},T={class:"input-container"},E={class:"input-container"},F={class:"input-container"},H={class:"textarea-container"},N={class:"checkboxes"},q={class:"square-container"},K={class:"square"},U={class:"text"},Y=g(()=>e("span",{style:{color:"red"}},"*",-1)),Z={class:"square-container"},W={class:"square"},G={class:"text"},J={class:"button-container"};function O(s,t,i,Q,a,r){const n=v("Picture");return c(),l("section",$,[r.contactLinks.length>0?(c(),l("div",S,[e("div",C,[(c(!0),l(w,null,b(r.contactLinks,o=>(c(),l("div",{class:"link",key:`contact-link-${o.id}`},[e("a",{href:o.link||"",target:o.link&&o.link.includes("http")?"_blank":"",class:"wrapper"},[o.icon_svg?(c(),l("span",{key:0,innerHTML:o.icon_svg},null,8,j)):(c(),A(n,{key:1,width:"auto",height:25,alt:o.photo_alt,src:`/storage/media/${o.photo}`,classImg:"img"},null,8,["alt","src"])),e("div",{class:"text",innerHTML:r.prepareBlockHtml(o.title)},null,8,B)],8,V)]))),128))]),d(n,{width:"125",height:"125",alt:"elipsa",src:"/storage/img/home/ellipse1.svg",classImg:"ellipse"})])):y("",!0),e("form",null,[P,e("div",R,[e("div",T,[m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.formData.name=o),placeholder:"Imię i nazwisko"},null,512),[[h,a.formData.name]])]),e("div",E,[m(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=o=>a.formData.email=o),placeholder:"Adres e-mail"},null,512),[[h,a.formData.email]])]),e("div",F,[m(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>a.formData.subject=o),placeholder:"Temat"},null,512),[[h,a.formData.subject]])]),e("div",H,[m(e("textarea",{rows:"5",placeholder:"Treść wiadomości","onUpdate:modelValue":t[3]||(t[3]=o=>a.formData.message=o)},null,512),[[h,a.formData.message]])])]),e("div",N,[e("div",{class:"checkbox",onClick:t[4]||(t[4]=o=>a.formData.rodo1=!a.formData.rodo1)},[e("div",q,[e("div",K,[d(n,{width:15,height:15,alt:"check",src:"/storage/img/stock/white-check.svg",classImg:{show:a.formData.rodo1}},null,8,["src","classImg"])])]),e("div",U,[f(u(r.prepareRodo(a.settings.rodo_1))+" ",1),Y])]),e("div",{class:"checkbox",onClick:t[5]||(t[5]=o=>a.formData.rodo2=!a.formData.rodo2)},[e("div",Z,[e("div",W,[d(n,{width:15,height:15,alt:"check",src:"/storage/img/stock/white-check.svg",classImg:{show:a.formData.rodo2}},null,8,["src","classImg"])])]),e("div",G,u(r.prepareRodo(a.settings.rodo_2)),1)])]),e("div",J,[e("button",{onClick:t[6]||(t[6]=D((...o)=>r.saveMail&&r.saveMail(...o),["prevent"])),class:"button first-button"}," Wyślij ")])]),d(n,{width:800,height:800,alt:"ellipsa",src:"/storage/img/contact/form-ellipse.svg",classImg:"form-ellipse"},null,8,["src"])])}const st=_(I,[["render",O],["__scopeId","data-v-67bbdee8"]]);export{st as default};
