import{u as i}from"./ucfirst-206f84d9.js";function a(t){return t.slice(0,1).toLowerCase()+t.slice(1)}const o={emits:["blockDataEmit"],props:["reloadFlag"],watch:{reloadFlag(){this.reloadFlag&&this.reloadData()}},computed:{moduleName(){return this.table.slice(0,1).toUpperCase()+this.table.slice(1)}},methods:{emitData(){this.emit!==!1&&this.$emit("blockDataEmit",this.tableData)},async fetchData(){let t=this.table;this.module.namespaced&&(t=`${this.moduleName}/${this.table}`),await this.$store.dispatch(t),this.emitData()},async reloadData(){await this.fetchData()},registerModule(t,e){t&&(t=a(t)),t&&(t=i(t)),this.$store.hasModule(t||this.moduleName)||this.$store.registerModule(t||this.moduleName,e||this.module)}},async created(){this.table=a(this.table),this.registerModule()},beforeMount(){var t;this.table===void 0&&console.error(`Brakuje zmiennej 'table' w komponencie ${this.$options._parentVnode.tag}!`),this.tableData===void 0&&console.error(`Brakuje zmiennej 'tableData' w komponencie ${this.$options._parentVnode.tag}!`),this.module===void 0&&console.error(`Brakuje zmiennej 'module' w komponencie ${this.$options._parentVnode.tag}!`),((t=this.tableData)==null?void 0:t.constructor)===Array&&(this.$route.meta.adminRoute&&this.fetchData(),(this.tableData.length===0||this.tableData.some(e=>Object.values(e||{}).length===0))&&this.fetchData())}};export{o as a};
