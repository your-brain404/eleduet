import{o as l,c as u,r as Z,a as v,n as O,g as $,b as d,F as P,d as B,e as g,t as y,f as k,h as F,i as S,m as z,j as Q,w as L,v as E,k as p,l as h,p as U,q as T,T as W,_ as A,s as _,u as X,x as D,y as Y,z as G,A as ee,B as te}from"./app-7e0eada9.js";import{S as V}from"./snackbar-alerts-6b28df32.js";import{S as I,V as J,T as se,a as oe,b as ae}from"./VDivider-99007ce3.js";import{C as ne,p as q}from"./Checkbox-e2b7c125.js";import{g as ie}from"./get-module-42171752.js";import"./ucfirst-206f84d9.js";import"./admin-table-component-d7c08093.js";import"./CustomLink-d2b02c25.js";var le=Object.defineProperty,re=Object.defineProperties,ce=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,R=(e,t,s)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,C=(e,t)=>{for(var s in t||(t={}))de.call(t,s)&&R(e,s,t[s]);if(N)for(var s of N(t))he.call(t,s)&&R(e,s,t[s]);return e},K=(e,t)=>re(e,ce(t));const ue={props:{autoscroll:{type:Boolean,default:!0}},watch:{typeAheadPointer(){this.autoscroll&&this.maybeAdjustScroll()},open(e){this.autoscroll&&e&&this.$nextTick(()=>this.maybeAdjustScroll())}},methods:{maybeAdjustScroll(){var e;const t=((e=this.$refs.dropdownMenu)==null?void 0:e.children[this.typeAheadPointer])||!1;if(t){const s=this.getDropdownViewport(),{top:n,bottom:a,height:o}=t.getBoundingClientRect();if(n<s.top)return this.$refs.dropdownMenu.scrollTop=t.offsetTop;if(a>s.bottom)return this.$refs.dropdownMenu.scrollTop=t.offsetTop-(s.height-o)}},getDropdownViewport(){return this.$refs.dropdownMenu?this.$refs.dropdownMenu.getBoundingClientRect():{height:0,top:0,bottom:0}}}},pe={data(){return{typeAheadPointer:-1}},watch:{filteredOptions(){for(let e=0;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},open(e){e&&this.typeAheadToLastSelected()},selectedValue(){this.open&&this.typeAheadToLastSelected()}},methods:{typeAheadUp(){for(let e=this.typeAheadPointer-1;e>=0;e--)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadDown(){for(let e=this.typeAheadPointer+1;e<this.filteredOptions.length;e++)if(this.selectable(this.filteredOptions[e])){this.typeAheadPointer=e;break}},typeAheadSelect(){const e=this.filteredOptions[this.typeAheadPointer];e&&this.selectable(e)&&this.select(e)},typeAheadToLastSelected(){this.typeAheadPointer=this.selectedValue.length!==0?this.filteredOptions.indexOf(this.selectedValue[this.selectedValue.length-1]):-1}}},me={props:{loading:{type:Boolean,default:!1}},data(){return{mutableLoading:!1}},watch:{search(){this.$emit("search",this.search,this.toggleLoading)},loading(e){this.mutableLoading=e}},methods:{toggleLoading(e=null){return e==null?this.mutableLoading=!this.mutableLoading:this.mutableLoading=e}}},j=(e,t)=>{const s=e.__vccOpts||e;for(const[n,a]of t)s[n]=a;return s},_e={},fe={xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10"},be=d("path",{d:"M6.895455 5l2.842897-2.842898c.348864-.348863.348864-.914488 0-1.263636L9.106534.261648c-.348864-.348864-.914489-.348864-1.263636 0L5 3.104545 2.157102.261648c-.348863-.348864-.914488-.348864-1.263636 0L.261648.893466c-.348864.348864-.348864.914489 0 1.263636L3.104545 5 .261648 7.842898c-.348864.348863-.348864.914488 0 1.263636l.631818.631818c.348864.348864.914773.348864 1.263636 0L5 6.895455l2.842898 2.842897c.348863.348864.914772.348864 1.263636 0l.631818-.631818c.348864-.348864.348864-.914489 0-1.263636L6.895455 5z"},null,-1),ge=[be];function ye(e,t){return l(),u("svg",fe,ge)}const ve=j(_e,[["render",ye]]),we={},ke={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"10"},Oe=d("path",{d:"M9.211364 7.59931l4.48338-4.867229c.407008-.441854.407008-1.158247 0-1.60046l-.73712-.80023c-.407008-.441854-1.066904-.441854-1.474243 0L7 5.198617 2.51662.33139c-.407008-.441853-1.066904-.441853-1.474243 0l-.737121.80023c-.407008.441854-.407008 1.158248 0 1.600461l4.48338 4.867228L7 10l2.211364-2.40069z"},null,-1),Se=[Oe];function xe(e,t){return l(),u("svg",ke,Se)}const $e=j(we,[["render",xe]]),H={Deselect:ve,OpenIndicator:$e},Ve={mounted(e,{instance:t}){if(t.appendToBody){const{height:s,top:n,left:a,width:o}=t.$refs.toggle.getBoundingClientRect();let f=window.scrollX||window.pageXOffset,i=window.scrollY||window.pageYOffset;e.unbindPosition=t.calculatePosition(e,t,{width:o+"px",left:f+a+"px",top:i+n+s+"px"}),document.body.appendChild(e)}},unmounted(e,{instance:t}){t.appendToBody&&(e.unbindPosition&&typeof e.unbindPosition=="function"&&e.unbindPosition(),e.parentNode&&e.parentNode.removeChild(e))}};function Ce(e){const t={};return Object.keys(e).sort().forEach(s=>{t[s]=e[s]}),JSON.stringify(t)}let Pe=0;function Be(){return++Pe}const Te={components:C({},H),directives:{appendToBody:Ve},mixins:[ue,pe,me],compatConfig:{MODE:3},emits:["open","close","update:modelValue","search","search:compositionstart","search:compositionend","search:keydown","search:blur","search:focus","search:input","option:created","option:selecting","option:selected","option:deselecting","option:deselected"],props:{modelValue:{},components:{type:Object,default:()=>({})},options:{type:Array,default(){return[]}},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},deselectFromDropdown:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},transition:{type:String,default:"vs__fade"},clearSearchOnSelect:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},label:{type:String,default:"label"},autocomplete:{type:String,default:"off"},reduce:{type:Function,default:e=>e},selectable:{type:Function,default:e=>!0},getOptionLabel:{type:Function,default(e){return typeof e=="object"?e.hasOwnProperty(this.label)?e[this.label]:console.warn(`[vue-select warn]: Label key "option.${this.label}" does not exist in options object ${JSON.stringify(e)}.
https://vue-select.org/api/props.html#getoptionlabel`):e}},getOptionKey:{type:Function,default(e){if(typeof e!="object")return e;try{return e.hasOwnProperty("id")?e.id:Ce(e)}catch(t){return console.warn(`[vue-select warn]: Could not stringify this option to generate unique key. Please provide'getOptionKey' prop to return a unique key for each option.
https://vue-select.org/api/props.html#getoptionkey`,e,t)}}},onTab:{type:Function,default:function(){this.selectOnTab&&!this.isComposing&&this.typeAheadSelect()}},taggable:{type:Boolean,default:!1},tabindex:{type:Number,default:null},pushTags:{type:Boolean,default:!1},filterable:{type:Boolean,default:!0},filterBy:{type:Function,default(e,t,s){return(t||"").toLocaleLowerCase().indexOf(s.toLocaleLowerCase())>-1}},filter:{type:Function,default(e,t){return e.filter(s=>{let n=this.getOptionLabel(s);return typeof n=="number"&&(n=n.toString()),this.filterBy(s,n,t)})}},createOption:{type:Function,default(e){return typeof this.optionList[0]=="object"?{[this.label]:e}:e}},resetOnOptionsChange:{default:!1,validator:e=>["function","boolean"].includes(typeof e)},clearSearchOnBlur:{type:Function,default:function({clearSearchOnSelect:e,multiple:t}){return e&&!t}},noDrop:{type:Boolean,default:!1},inputId:{type:String},dir:{type:String,default:"auto"},selectOnTab:{type:Boolean,default:!1},selectOnKeyCodes:{type:Array,default:()=>[13]},searchInputQuerySelector:{type:String,default:"[type=search]"},mapKeydown:{type:Function,default:(e,t)=>e},appendToBody:{type:Boolean,default:!1},calculatePosition:{type:Function,default(e,t,{width:s,top:n,left:a}){e.style.top=n,e.style.left=a,e.style.width=s}},dropdownShouldOpen:{type:Function,default({noDrop:e,open:t,mutableLoading:s}){return e?!1:t&&!s}},uid:{type:[String,Number],default:()=>Be()}},data(){return{search:"",open:!1,isComposing:!1,pushedTags:[],_value:[],deselectButtons:[]}},computed:{isReducingValues(){return this.$props.reduce!==this.$options.props.reduce.default},isTrackingValues(){return typeof this.modelValue>"u"||this.isReducingValues},selectedValue(){let e=this.modelValue;return this.isTrackingValues&&(e=this.$data._value),e!=null&&e!==""?[].concat(e):[]},optionList(){return this.options.concat(this.pushTags?this.pushedTags:[])},searchEl(){return this.$slots.search?this.$refs.selectedOptions.querySelector(this.searchInputQuerySelector):this.$refs.search},scope(){const e={search:this.search,loading:this.loading,searching:this.searching,filteredOptions:this.filteredOptions};return{search:{attributes:C({disabled:this.disabled,placeholder:this.searchPlaceholder,tabindex:this.tabindex,readonly:!this.searchable,id:this.inputId,"aria-autocomplete":"list","aria-labelledby":`vs${this.uid}__combobox`,"aria-controls":`vs${this.uid}__listbox`,ref:"search",type:"search",autocomplete:this.autocomplete,value:this.search},this.dropdownOpen&&this.filteredOptions[this.typeAheadPointer]?{"aria-activedescendant":`vs${this.uid}__option-${this.typeAheadPointer}`}:{}),events:{compositionstart:()=>this.isComposing=!0,compositionend:()=>this.isComposing=!1,keydown:this.onSearchKeyDown,blur:this.onSearchBlur,focus:this.onSearchFocus,input:t=>this.search=t.target.value}},spinner:{loading:this.mutableLoading},noOptions:{search:this.search,loading:this.mutableLoading,searching:this.searching},openIndicator:{attributes:{ref:"openIndicator",role:"presentation",class:"vs__open-indicator"}},listHeader:e,listFooter:e,header:K(C({},e),{deselect:this.deselect}),footer:K(C({},e),{deselect:this.deselect})}},childComponents(){return C(C({},H),this.components)},stateClasses(){return{"vs--open":this.dropdownOpen,"vs--single":!this.multiple,"vs--multiple":this.multiple,"vs--searching":this.searching&&!this.noDrop,"vs--searchable":this.searchable&&!this.noDrop,"vs--unsearchable":!this.searchable,"vs--loading":this.mutableLoading,"vs--disabled":this.disabled}},searching(){return!!this.search},dropdownOpen(){return this.dropdownShouldOpen(this)},searchPlaceholder(){return this.isValueEmpty&&this.placeholder?this.placeholder:void 0},filteredOptions(){const e=[].concat(this.optionList);if(!this.filterable&&!this.taggable)return e;const t=this.search.length?this.filter(e,this.search,this):e;if(this.taggable&&this.search.length){const s=this.createOption(this.search);this.optionExists(s)||t.unshift(s)}return t},isValueEmpty(){return this.selectedValue.length===0},showClearButton(){return!this.multiple&&this.clearable&&!this.open&&!this.isValueEmpty}},watch:{options(e,t){const s=()=>typeof this.resetOnOptionsChange=="function"?this.resetOnOptionsChange(e,t,this.selectedValue):this.resetOnOptionsChange;!this.taggable&&s()&&this.clearSelection(),this.modelValue&&this.isTrackingValues&&this.setInternalValueFromOptions(this.modelValue)},modelValue:{immediate:!0,handler(e){this.isTrackingValues&&this.setInternalValueFromOptions(e)}},multiple(){this.clearSelection()},open(e){this.$emit(e?"open":"close")}},created(){this.mutableLoading=this.loading},methods:{setInternalValueFromOptions(e){Array.isArray(e)?this.$data._value=e.map(t=>this.findOptionFromReducedValue(t)):this.$data._value=this.findOptionFromReducedValue(e)},select(e){this.$emit("option:selecting",e),this.isOptionSelected(e)?this.deselectFromDropdown&&(this.clearable||this.multiple&&this.selectedValue.length>1)&&this.deselect(e):(this.taggable&&!this.optionExists(e)&&(this.$emit("option:created",e),this.pushTag(e)),this.multiple&&(e=this.selectedValue.concat(e)),this.updateValue(e),this.$emit("option:selected",e)),this.onAfterSelect(e)},deselect(e){this.$emit("option:deselecting",e),this.updateValue(this.selectedValue.filter(t=>!this.optionComparator(t,e))),this.$emit("option:deselected",e)},clearSelection(){this.updateValue(this.multiple?[]:null)},onAfterSelect(e){this.closeOnSelect&&(this.open=!this.open,this.searchEl.blur()),this.clearSearchOnSelect&&(this.search="")},updateValue(e){typeof this.modelValue>"u"&&(this.$data._value=e),e!==null&&(Array.isArray(e)?e=e.map(t=>this.reduce(t)):e=this.reduce(e)),this.$emit("update:modelValue",e)},toggleDropdown(e){const t=e.target!==this.searchEl;t&&e.preventDefault();const s=[...this.deselectButtons||[],this.$refs.clearButton];if(this.searchEl===void 0||s.filter(Boolean).some(n=>n.contains(e.target)||n===e.target)){e.preventDefault();return}this.open&&t?this.searchEl.blur():this.disabled||(this.open=!0,this.searchEl.focus())},isOptionSelected(e){return this.selectedValue.some(t=>this.optionComparator(t,e))},isOptionDeselectable(e){return this.isOptionSelected(e)&&this.deselectFromDropdown},optionComparator(e,t){return this.getOptionKey(e)===this.getOptionKey(t)},findOptionFromReducedValue(e){const t=n=>JSON.stringify(this.reduce(n))===JSON.stringify(e),s=[...this.options,...this.pushedTags].filter(t);return s.length===1?s[0]:s.find(n=>this.optionComparator(n,this.$data._value))||e},closeSearchOptions(){this.open=!1,this.$emit("search:blur")},maybeDeleteValue(){if(!this.searchEl.value.length&&this.selectedValue&&this.selectedValue.length&&this.clearable){let e=null;this.multiple&&(e=[...this.selectedValue.slice(0,this.selectedValue.length-1)]),this.updateValue(e)}},optionExists(e){return this.optionList.some(t=>this.optionComparator(t,e))},normalizeOptionForSlot(e){return typeof e=="object"?e:{[this.label]:e}},pushTag(e){this.pushedTags.push(e)},onEscape(){this.search.length?this.search="":this.searchEl.blur()},onSearchBlur(){if(this.mousedown&&!this.searching)this.mousedown=!1;else{const{clearSearchOnSelect:e,multiple:t}=this;this.clearSearchOnBlur({clearSearchOnSelect:e,multiple:t})&&(this.search=""),this.closeSearchOptions();return}if(this.search.length===0&&this.options.length===0){this.closeSearchOptions();return}},onSearchFocus(){this.open=!0,this.$emit("search:focus")},onMousedown(){this.mousedown=!0},onMouseUp(){this.mousedown=!1},onSearchKeyDown(e){const t=a=>(a.preventDefault(),!this.isComposing&&this.typeAheadSelect()),s={8:a=>this.maybeDeleteValue(),9:a=>this.onTab(),27:a=>this.onEscape(),38:a=>(a.preventDefault(),this.typeAheadUp()),40:a=>(a.preventDefault(),this.typeAheadDown())};this.selectOnKeyCodes.forEach(a=>s[a]=t);const n=this.mapKeydown(s,this);if(typeof n[e.keyCode]=="function")return n[e.keyCode](e)}}},Ae=["dir"],De=["id","aria-expanded","aria-owns"],Fe={ref:"selectedOptions",class:"vs__selected-options"},Le=["disabled","title","aria-label","onClick"],Ie={ref:"actions",class:"vs__actions"},je=["disabled"],Me={class:"vs__spinner"},ze=["id"],Ee=["id","aria-selected","onMouseover","onClick"],Ue={key:0,class:"vs__no-options"},Ne=g(" Sorry, no matching options. "),Re=["id"];function Ke(e,t,s,n,a,o){const f=Z("append-to-body");return l(),u("div",{dir:s.dir,class:T(["v-select",o.stateClasses])},[v(e.$slots,"header",O($(o.scope.header))),d("div",{id:`vs${s.uid}__combobox`,ref:"toggle",class:"vs__dropdown-toggle",role:"combobox","aria-expanded":o.dropdownOpen.toString(),"aria-owns":`vs${s.uid}__listbox`,"aria-label":"Search for option",onMousedown:t[1]||(t[1]=i=>o.toggleDropdown(i))},[d("div",Fe,[(l(!0),u(P,null,B(o.selectedValue,(i,m)=>v(e.$slots,"selected-option-container",{option:o.normalizeOptionForSlot(i),deselect:o.deselect,multiple:s.multiple,disabled:s.disabled},()=>[(l(),u("span",{key:s.getOptionKey(i),class:"vs__selected"},[v(e.$slots,"selected-option",O($(o.normalizeOptionForSlot(i))),()=>[g(y(s.getOptionLabel(i)),1)]),s.multiple?(l(),u("button",{key:0,ref_for:!0,ref:c=>a.deselectButtons[m]=c,disabled:s.disabled,type:"button",class:"vs__deselect",title:`Deselect ${s.getOptionLabel(i)}`,"aria-label":`Deselect ${s.getOptionLabel(i)}`,onClick:c=>o.deselect(i)},[(l(),k(F(o.childComponents.Deselect)))],8,Le)):S("",!0)]))])),256)),v(e.$slots,"search",O($(o.scope.search)),()=>[d("input",z({class:"vs__search"},o.scope.search.attributes,Q(o.scope.search.events)),null,16)])],512),d("div",Ie,[L(d("button",{ref:"clearButton",disabled:s.disabled,type:"button",class:"vs__clear",title:"Clear Selected","aria-label":"Clear Selected",onClick:t[0]||(t[0]=(...i)=>o.clearSelection&&o.clearSelection(...i))},[(l(),k(F(o.childComponents.Deselect)))],8,je),[[E,o.showClearButton]]),v(e.$slots,"open-indicator",O($(o.scope.openIndicator)),()=>[s.noDrop?S("",!0):(l(),k(F(o.childComponents.OpenIndicator),O(z({key:0},o.scope.openIndicator.attributes)),null,16))]),v(e.$slots,"spinner",O($(o.scope.spinner)),()=>[L(d("div",Me,"Loading...",512),[[E,e.mutableLoading]])])],512)],40,De),p(W,{name:s.transition},{default:h(()=>[o.dropdownOpen?L((l(),u("ul",{id:`vs${s.uid}__listbox`,ref:"dropdownMenu",key:`vs${s.uid}__listbox`,class:"vs__dropdown-menu",role:"listbox",tabindex:"-1",onMousedown:t[2]||(t[2]=U((...i)=>o.onMousedown&&o.onMousedown(...i),["prevent"])),onMouseup:t[3]||(t[3]=(...i)=>o.onMouseUp&&o.onMouseUp(...i))},[v(e.$slots,"list-header",O($(o.scope.listHeader))),(l(!0),u(P,null,B(o.filteredOptions,(i,m)=>(l(),u("li",{id:`vs${s.uid}__option-${m}`,key:s.getOptionKey(i),role:"option",class:T(["vs__dropdown-option",{"vs__dropdown-option--deselect":o.isOptionDeselectable(i)&&m===e.typeAheadPointer,"vs__dropdown-option--selected":o.isOptionSelected(i),"vs__dropdown-option--highlight":m===e.typeAheadPointer,"vs__dropdown-option--disabled":!s.selectable(i)}]),"aria-selected":m===e.typeAheadPointer?!0:null,onMouseover:c=>s.selectable(i)?e.typeAheadPointer=m:null,onClick:U(c=>s.selectable(i)?o.select(i):null,["prevent","stop"])},[v(e.$slots,"option",O($(o.normalizeOptionForSlot(i))),()=>[g(y(s.getOptionLabel(i)),1)])],42,Ee))),128)),o.filteredOptions.length===0?(l(),u("li",Ue,[v(e.$slots,"no-options",O($(o.scope.noOptions)),()=>[Ne])])):S("",!0),v(e.$slots,"list-footer",O($(o.scope.listFooter)))],40,ze)),[[f]]):(l(),u("ul",{key:1,id:`vs${s.uid}__listbox`,role:"listbox",style:{display:"none",visibility:"hidden"}},null,8,Re))]),_:3},8,["name"]),v(e.$slots,"footer",O($(o.scope.footer)))],10,Ae)}const He=j(Te,[["render",Ke]]);const Je={props:{options:Array,dropdownShouldOpen:Function,closeOnSelect:{type:Boolean,default:!0},clearSearchOnSelect:{type:Boolean,default:!0},searchable:{type:Boolean,default:!0},value:{default:null}},components:{vSelect:He,SvgVue:I}};function qe(e,t,s,n,a,o){const f=_("svg-vue"),i=_("v-select",!0);return l(),k(i,{class:"v-select--custom-settings",options:s.options,dropdownShouldOpen:s.dropdownShouldOpen,closeOnSelect:s.closeOnSelect,clearSearchOnSelect:s.clearSearchOnSelect,searchable:s.searchable,value:s.value,onInput:t[0]||(t[0]=m=>e.$emit("input",m))},{"open-indicator":h(()=>[p(f,{width:"24",height:"24",class:"vs__open-indicator",icon:"menu-down"})]),_:1},8,["options","dropdownShouldOpen","closeOnSelect","clearSearchOnSelect","searchable","value"])}const Ze=A(Je,[["render",qe],["__scopeId","data-v-a2f3f804"]]);const Qe={components:{SvgVue:I,VSelect:Ze,VBtn:J},props:{headers:Array,items:Array,search:String,itemsPerPage:{default:5,type:Number},itemsPerPageOptions:{type:Array,default:()=>[5,10,15]}},data(){return{headersClone:this.headers,sort:{},perPage:this.itemsPerPage,page:1}},methods:{truncate(e){return e&&(e.length>70?e.slice(0,70)+"...":e)},setSort(e){this.sort.column!==e?this.sort={type:"asc",column:e}:this.sort.type==="asc"?this.sort.type="desc":this.sort={}}},computed:{filteredItems(){let e=this.items;if(e=e.filter(t=>{if(!this.search)return t;for(let s in t)if(t[s].toString().toLowerCase().includes(this.search.toLowerCase()))return t}),this.sort.column){let t=this.sort.type==="asc"?1:-1;e=e.sort((s,n)=>s[this.sort.column]>n[this.sort.column]?t:t*-1)}return e},paginatedItems(){return this.filteredItems.slice((this.page-1)*this.perPage,(this.page-1)*this.perPage+this.perPage)},maxPage(){return Math.ceil(this.filteredItems.length/this.perPage)}}},We={class:"data-table"},Xe={class:"data-table__table"},Ye={class:"data-table__thead"},Ge={class:"data-table__tr"},et=["align","onClick"],tt={class:"data-table__tbody"},st=["align"],ot={key:0,class:"data-table__td-column-name"},at={key:1,class:"data-table__checkbox"},nt={key:2,class:"data-table__custom-td"},it={class:"data-table__footer"},lt={class:"data-table__per-page"},rt={class:"data-table__pagination"},ct={class:"data-table__pagination-arrows"};function dt(e,t,s,n,a,o){const f=_("svg-vue"),i=_("v-select"),m=_("v-btn");return l(),u("div",We,[d("table",Xe,[d("thead",Ye,[d("tr",Ge,[(l(!0),u(P,null,B(a.headersClone,c=>(l(),u("th",{class:T(["data-table__th",{"data-table__th--sort-active":a.sort.column===c.value,"data-table__th--sort-desc":a.sort.column===c.value&&a.sort.type==="desc"}]),align:c.align,onClick:w=>c.text&&o.setSort(c.value),key:"header-"+c.value,style:X({cursor:!!c.text||"default"})},[g(y(c.text)+" ",1),c.text?(l(),k(f,{key:0,class:"data-table__sort-arrow",width:"18",height:"16",icon:"arrow-up"})):S("",!0)],14,et))),128))])]),d("tbody",tt,[(l(!0),u(P,null,B(o.paginatedItems,(c,w)=>(l(),u("tr",{class:"data-table__tr",key:"item-"+w},[(l(!0),u(P,null,B(a.headersClone,b=>(l(),u("td",{align:b.align,class:"data-table__td",key:"header-"+b.value},[b.text?(l(),u("div",ot,y(b.text),1)):S("",!0),b.type==="checkbox"?(l(),u("div",at,[v(e.$slots,"checkbox",{checkbox:b.value,item:c},()=>[g(y(c[b.value]),1)],!0)])):(l(),u("div",nt,[v(e.$slots,`item.${b.value}`,{item:c},()=>[g(y(o.truncate(c[b.value])),1)],!0)]))],8,st))),128))]))),128))])]),d("div",it,[d("div",lt,[g(" Wierszy na stronie: "),p(i,{modelValue:a.perPage,"onUpdate:modelValue":t[0]||(t[0]=c=>a.perPage=c),class:"data-table__per-page-select",clearSearchOnSelect:!1,options:s.itemsPerPageOptions,searchable:!1},null,8,["modelValue","options"])]),d("div",rt,y(a.perPage*a.page-(a.perPage-1))+"-"+y(a.perPage*a.page>o.filteredItems.length?o.filteredItems.length:a.perPage*a.page)+" z "+y(o.filteredItems.length),1),d("div",ct,[d("div",{onClick:t[1]||(t[1]=c=>a.page--),class:T(["data-table__previous-page data-table__pagination-arrow",{"data-table__pagination-arrow--disabled":a.page<2}])},[p(m,{disabled:a.page<2,"just-icon":""},{icon:h(()=>[p(f,{width:"24",height:"24",icon:"chevron-left"})]),_:1},8,["disabled"])],2),d("div",{onClick:t[2]||(t[2]=c=>a.page++),class:T(["data-table__next-page data-table__pagination-arrow",{"data-table__pagination-arrow--disabled":a.page>=o.maxPage}])},[p(m,{disabled:a.page>=o.maxPage,"just-icon":""},{icon:h(()=>[p(f,{width:"24",height:"24",icon:"chevron-right"})]),_:1},8,["disabled"])],2)])])])}const ht=A(Qe,[["render",dt],["__scopeId","data-v-5f1306a3"]]);const ut={emits:["reloadFlag"],components:{DataTable:ht,VBtn:J,SvgVue:I,TextField:se,Checkbox:ne},props:["headers","block","i"],data(){return{search:"",templateCheckboxes:["home_page","active","blocked","is_paid","sent"]}},methods:{slot:e=>`item.${e}`,getRecordName:(e,t)=>e.tablename=="users"?t.name:e.tablename=="mails"?t.subject:t.title,deleteItem(e,t){let s=e.tablename=="users"?"użytkownika":"przedmiot";confirm(`Na pewno chcesz usunąć trwale ${s} "${this.getRecordName(e,t)}" z tabeli "${e.title}"? `)&&(this.$store.commit("loading",!0),e.tablename=="users"&&this.$store.dispatch("deleteUserComments",t.id),D.delete(`/api/${e.tablename}/delete/${t.id}`).then(n=>{this.$emit("reloadFlag",!0),this.$store.commit("loading",!1),this.$store.commit("toast",V.delete),e.tablename=="news"&&this.$store.dispatch("deleteComments",t.id),setTimeout(()=>this.$emit("reloadFlag",!1),200)}).catch(n=>{this.$store.commit("loading",!1),this.$store.commit("toast",V.error),console.log(n)}))},acceptReservation(e){D.post("/api/reservations/accept",e).then(t=>{t.data.success&&this.$store.commit("toast",t.data.success.message),t.data.error&&this.$store.commit("toast",t.data.error.message),this.$emit("reloadFlag",!0),setTimeout(()=>this.$emit("reloadFlag",!1),200)}).catch(t=>{console.log(t),this.$store.commit("toast",V.error)})},sendShippingConfirmation(e){D.post("/api/shop_orders/shipping_confirmation",e).then(t=>{t.data.success&&this.$store.commit("toast",t.data.success.message),t.data.error&&this.$store.commit("toast",t.data.error.message),this.$emit("reloadFlag",!0),setTimeout(()=>this.$emit("reloadFlag",!1),200)}).catch(t=>{console.log(t),this.$store.commit("toast",V.error)})},setCheckbox(e,t){if(e=="reservations"&&t.active&&!confirm("Czy na pewno potwierdzić rezerwację? Zostanie wysłane potwierdzenie na maila użytkownika!")){this.block.table.find(s=>t.id==s.id).active=!1;return}if(e=="shop_orders"&&t.sent)if(confirm("Czy na pewno oznaczyć jako wysłane? Zostanie wysłane potwierdzenie na maila użytkownika!"))this.sendShippingConfirmation(t);else{this.block.table.find(s=>t.id==s.id).sent=!1;return}D.put(`/api/${e}/edit`,t).then(s=>{this.$emit("reloadFlag",!0),setTimeout(()=>this.$emit("reloadFlag",!1),200),this.$store.commit("toast",V.edit),e=="reservations"&&t.active&&this.acceptReservation(t)}).catch(s=>{this.$store.commit("toast",V.error),console.log(s)})}}},pt=e=>(Y("data-v-680684c2"),e=e(),G(),e),mt={class:"search-container"},_t=pt(()=>d("h2",{class:"table__title first-color"},"Akcje",-1)),ft={style:{display:"flex","align-items":"center","flex-wrap":"wrap"}},bt={class:"d-flex justify-content-center"},gt={class:"d-flex justify-content-center"},yt={class:"d-flex justify-content-center"},vt={class:"d-flex justify-content-center"},wt={class:"table__action-buttons"};function kt(e,t,s,n,a,o){const f=_("text-field"),i=_("svg-vue"),m=_("v-btn"),c=_("router-link"),w=_("checkbox"),b=_("data-table");return l(),u("div",null,[d("div",mt,[_t,d("div",ft,[p(f,{class:"search-input",modelValue:a.search,"onUpdate:modelValue":t[0]||(t[0]=r=>a.search=r),label:"Szukaj...",icon:"magnify"},null,8,["modelValue"]),s.block.multiple?(l(),k(c,{key:0,class:"form-link",to:`/admin-panel/${s.block.tablename}/${s.block.parent?`${e.$route.params.parent_id}/`:""}form`},{default:h(()=>[p(m,{customClass:"add-button",icon:s.block.add_button_icon?s.block.add_button_icon:"plus"},{icon:h(()=>[p(i,{class:"custom-btn__content-icon",width:"18",height:"18",icon:"plus"})]),default:h(()=>[g(" "+y(s.block.add_button_text?s.block.add_button_text:"Dodaj"),1)]),_:1},8,["icon"])]),_:1},8,["to"])):S("",!0)])]),p(b,{headers:s.headers[s.i],items:s.block.table,search:a.search},{checkbox:h(({item:r,checkbox:x})=>[d("div",bt,[p(w,{"no-validation":"",modelValue:r[x],"onUpdate:modelValue":M=>r[x]=M,onInput:M=>o.setCheckbox(s.block.tablename,r)},null,8,["modelValue","onUpdate:modelValue","onInput"])])]),"item.name":h(({item:r})=>[g(y(s.block.split_name?`${r.first_name} ${r.last_name}`:r.name),1)]),"item.entry":h(({item:r})=>[g(y(`${r.entry} - ${r.leave}`),1)]),"item.answer":h(({item:r})=>[d("div",gt,[p(w,{"no-validation":"",modelValue:r.answer,"onUpdate:modelValue":x=>r.answer=x,disabled:""},null,8,["modelValue","onUpdate:modelValue"])])]),"item.order_number":h(({item:r})=>[d("div",yt,[p(f,{modelValue:r.order_number,"onUpdate:modelValue":x=>r.order_number=x},null,8,["modelValue","onUpdate:modelValue"])])]),"item.sent":h(({item:r})=>[d("div",vt,[p(w,{disabled:r.sent,onInput:x=>o.setCheckbox(s.block.tablename,r),modelValue:r.sent,"onUpdate:modelValue":x=>r.sent=x},null,8,["disabled","onInput","modelValue","onUpdate:modelValue"])])]),"item.actions":h(({item:r})=>[d("div",wt,[s.block.list?(l(),k(c,{key:0,class:"form-link table__action-button",to:`/admin-panel/${s.block.list}/${r.id}`},{default:h(()=>[p(m,{small:"",icon:"format-list-bulleted"},{default:h(()=>[g(" Lista ")]),_:1})]),_:2},1032,["to"])):S("",!0),s.block.gallery?(l(),k(c,{key:1,class:"form-link table__action-button",to:`/admin-panel/${s.block.tablename}/gallery/${r.id}`},{default:h(()=>[p(m,{small:"",color:"warning",icon:"image-multiple"},{default:h(()=>[g(" Galeria ")]),_:1})]),_:2},1032,["to"])):S("",!0),s.block.non_editable?S("",!0):(l(),k(c,{key:2,class:"form-link table__action-button",to:`/admin-panel/${s.block.tablename}/${s.block.parent?`${e.$route.params.parent_id}/`:""}form/${r.id}`},{default:h(()=>[p(m,{small:""},{icon:h(()=>[p(i,{class:"custom-btn__content-icon",width:"18",height:"18",icon:s.block.edit_button_icon||"pencil"},null,8,["icon"])]),default:h(()=>[g(" "+y(s.block.edit_button_text?s.block.edit_button_text:"Edytuj"),1)]),_:1})]),_:2},1032,["to"])),s.block.removable?(l(),k(m,{key:3,onClick:x=>o.deleteItem(s.block,r),small:"",color:"error",customClass:"table__action-button"},{icon:h(()=>[p(i,{class:"custom-btn__content-icon",width:"18",height:"18",icon:"close"})]),default:h(()=>[g(" Usuń ")]),_:2},1032,["onClick"])):S("",!0)])]),_:1},8,["headers","items","search"])])}const Ot=A(ut,[["render",kt],["__scopeId","data-v-680684c2"]]);const St={props:["parentData","block"],computed:{getParentId(){let e="";return q[this.block.parent_block].forEach(t=>{t.tablename==this.block.parent_block&&t.list=="shop_items"&&(e=`/${this.parentData.category_id}`)}),e}}},xt={class:"text-center"},$t={class:"text-center pt-4 font-weight-bold panel-title-header first-color"};function Vt(e,t,s,n,a,o){const f=_("v-btn"),i=_("router-link");return l(),u("div",xt,[d("h2",$t,y(s.block.title)+y(s.block.parent?" - "+s.parentData.title:""),1),s.block.parent?(l(),k(i,{key:0,to:`/admin-panel/${s.block.parent_block}${o.getParentId}`},{default:h(()=>[p(f,{color:"error"},{default:h(()=>[g("Wróc")]),_:1})]),_:1},8,["to"])):S("",!0)])}const Ct=A(St,[["render",Vt],["__scopeId","data-v-88aced52"]]);function Pt(e){let t=[];for(let s of e){let n=[{text:"Tytuł",align:"start",value:"title"}];s.answer&&(n[0]={text:"Odpowiedziano",align:"center",value:"answer",width:"10%",type:"checkbox"},n.splice(1,0,{text:"Temat",align:"start",value:"subject",width:"20%"},{text:"E-mail",align:"start",value:"email",width:"20%"})),s.order&&n.splice(0,0,{text:"Kolejność",align:"center",value:"order",width:"10%"}),s.name_column&&(n[0]={text:"Imię i nazwisko",align:"start",value:"name"}),s.is_paid&&n.splice(0,0,{text:"Zapłacono",align:"center",value:"is_paid",width:"2%",type:"checkbox"}),s.active&&n.splice(0,0,{text:"Aktywny",align:"center",value:"active",width:"10%",type:"checkbox"}),s.tablename=="reservations"&&n.splice(2,0,{text:"Data i czas",align:"center",value:"entry",width:"20%"}),s.tablename=="users"&&n.splice(1,0,{text:"Blokuj",align:"center",value:"blocked",width:"10%",type:"checkbox"}),s.home_page&&n.splice(0,0,{text:"Pokaż na stronie głównej",align:"center",value:"home_page",width:"10%",type:"checkbox"}),n.push({text:"",value:"actions"}),t.push(n)}return t}const Bt={data(){return{blocks:[],headers:[],parentData:{},reloadFlag:!1,cos:"cos"}},components:{Table:Ot,Title:Ct,VCard:oe,VDivider:ae},methods:{reloadFlagCb(e){this.reloadFlag=e},fillBaseHeaders(){this.headers=Pt(this.blocks)},setBlocks(){this.blocks=q[this.$route.path.split("/")[2]],this.fillBaseHeaders()},secureRoutes(){let e=JSON.parse(localStorage.getItem("user"));(e==null?void 0:e.type)!="Admin"&&(e==null?void 0:e.type)!="Moderator"&&this.$router.push({name:"AdminLogin"})},setBlockTable(e,t){t.constructor==Object&&Object.entries(t).length>0&&(t=[t]),this.blocks[e].table=t}},watch:{$route(){this.setBlocks()}},async created(){if(this.secureRoutes(),this.setBlocks(),this.$store.hasModule("users")||this.$store.registerModule("users",ee),this.$store.hasModule("loading")||this.$store.registerModule("loading",te),this.$store.dispatch("fetchAllUsers"),!this.$store.hasModule("snackbarAlerts")){const e=await ie("snackbarAlerts");this.$store.registerModule("snackbarAlerts",e)}}},Tt=["cos"],At=["id"];function Dt(e,t,s,n,a,o){const f=_("Title"),i=_("v-divider"),m=_("Table"),c=_("v-card");return l(),u("div",{class:"home",cos:a.cos},[(l(!0),u(P,null,B(a.blocks,(w,b)=>(l(),u("div",{id:w.tablename,ref_for:!0,ref:w.tablename,key:b,class:"home__block"},[p(c,{raised:""},{default:h(()=>[p(f,{block:w,parentData:a.parentData},null,8,["block","parentData"]),p(i),(l(),k(F(w.component),{class:"panel-component mb-5",onBlockDataEmit:r=>o.setBlockTable(b,r)},null,40,["onBlockDataEmit"])),p(m,{headers:a.headers,block:w,i:b,onReloadFlag:t[0]||(t[0]=r=>o.reloadFlagCb(r))},null,8,["headers","block","i"])]),_:2},1024)],8,At))),128))],8,Tt)}const Nt=A(Bt,[["render",Dt],["__scopeId","data-v-6088eae5"]]);export{Nt as default};
