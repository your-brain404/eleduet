import{_ as p,P as v,D as m,x as u,s as d,o,c,b as r,k as n,f as y,i as _,F as x,d as f}from"./app-7e0eada9.js";import{N as b}from"./vue-easy-lightbox.esm.min-e15b6dc9.js";import k from"./serviceModule-8a833408.js";const w={components:{VueEasyLightbox:b,Picture:v},data(){return{gallery:[],index:null,settings:window.global.config.settings}},computed:{service(){var e;return((e=this.$store.state.Service)==null?void 0:e.service)||{}}},methods:{existingPhotoPath:m,async fetchData(){await this.$store.dispatch("Service/service",this.$route.params.id),this.$emit("metaTitle",this.service.title)},fetchGallery(){u.get(`/api/gallery/get_photos/services/${this.$route.params.id}/`).then(e=>this.gallery=e.data).catch(e=>{console.error(e),this.$store.commit("toast","Przepraszamy nie udało się załadować galerii...")})},prepareTitle(e){return e==null?void 0:e.replace("{","<span>").replace("}","</span>")}},created(){this.$store.registerModule("Service",k),Object.values(this.service).length===0&&this.fetchData(),this.gallery.length===0&&this.fetchGallery()}},L={class:"service-page"},P={class:"service"},T={class:"content"},z={class:"section-content"},M=["innerHTML"],H=["innerHTML"],I={class:"position-relative photo-container"},V=["innerHTML"],N={key:0,class:"gallery"},S=["onClick"];function B(e,l,C,E,s,t){const a=d("Picture"),g=d("VueEasyLightbox");return o(),c("section",L,[r("section",P,[r("div",T,[r("div",z,[n(a,{src:`/storage/media/${s.settings.li_marker}`,alt:s.settings.li_marker_alt,width:48,height:75,classImg:"bolt"},null,8,["src","alt"]),r("h3",{class:"section-title",innerHTML:t.prepareTitle(t.service.title)},null,8,M)]),r("div",{class:"short-description",innerHTML:t.service.short_description},null,8,H)]),r("div",I,[t.service.photo_sizes?(o(),y(a,{key:0,width:t.service.photo_sizes.width,height:t.service.photo_sizes.height,alt:t.service.photo_alt,src:`/storage/media/${t.service.photo}`,classImg:"img-fluid photo service-photo",styleImg:{"object-position":t.service.photo_background_position}},null,8,["width","height","alt","src","styleImg"])):_("",!0)]),r("div",{class:"description",innerHTML:t.service.description},null,8,V),s.gallery.length>0?(o(),c("div",N,[n(g,{visible:Number.isInteger(s.index),imgs:s.gallery.map(i=>t.existingPhotoPath(`/storage/media/${i.path}`)),index:s.index,onHide:l[0]||(l[0]=i=>s.index=null)},null,8,["visible","imgs","index"]),(o(!0),c(x,null,f(s.gallery,(i,h)=>(o(),c("div",{key:`photo-gallery-service-${h}`,class:"photo-container",onClick:D=>s.index=h},[n(a,{width:i.photo_sizes.width,height:i.photo_sizes.height,alt:i.photo_alt,src:`/storage/media/${i.path}`,classImg:"photo"},null,8,["width","height","alt","src"])],8,S))),128))])):_("",!0)])])}const O=p(w,[["render",B],["__scopeId","data-v-7e8353ed"]]);export{O as default};
