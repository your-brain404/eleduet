{"version":3,"sources":["webpack:///./resources/js/views/admin/forms/Gallery.vue?45da","webpack:///resources/js/components/gallery-picker/AddPhotos.vue","webpack:///./resources/js/components/gallery-picker/AddPhotos.vue?f96c","webpack:///./resources/js/components/gallery-picker/AddPhotos.vue","webpack:///./resources/js/components/gallery-picker/AddPhotos.vue?2e8e","webpack:///resources/js/components/gallery-picker/GalleryPicker.vue","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue?33f8","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue?9fdd","webpack:///resources/js/views/admin/forms/Gallery.vue","webpack:///./resources/js/views/admin/forms/Gallery.vue?a1d3","webpack:///./resources/js/views/admin/forms/Gallery.vue","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue?b8ef","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue?ca85","webpack:///./resources/js/views/admin/forms/Gallery.vue?7782","webpack:///./resources/js/views/admin/forms/Gallery.vue?1a06","webpack:///./resources/js/components/gallery-picker/GalleryPicker.vue?4127","webpack:///./resources/js/views/admin/forms/Gallery.vue?6333"],"names":["data","file","loading","valid","rules","size","invalidSizeFileNames","push","name","computed","photoTypes","img","this","length","methods","submit","formData","append","i","_vm","_h","$createElement","_c","_self","attrs","staticClass","ref","model","value","callback","$$v","expression","_v","on","props","dialog","tab","tabs","photos","activePhotos","multiple","closeIcon","placeholder","search","page","components","AddPhotos","Picture","watch","apiGallery","loadPhotos","filteredPhotos","url","showCloseIcon","id","isActivePhotoDeleted","activePhotoPath","setApiGallery","includes","deletePhoto","confirm","getPhotoLinks","j","links","sendImageIdToPlaceholder","$emit","setPhotoClass","getPhotoById","path","created","staticStyle","scopedSlots","_u","key","fn","_g","_b","_s","title","searchPhoto","$event","_l","photo","_e","Math","ceil","GalleryPicker","formTitle","$route","split","getUrl","getImageDefaultPlaceholder","setGallery","pickedGallery","gallery","setImagePlaceholder","event","activePhoto","getFormData","resetForm","setLoading","$store","commit","state","add","edit","destroy","send","updateDeletedPhoto","splice","loadCurrentObject","loadGallery","$set","$router","go","module","exports","content","options","transform","undefined","locals"],"mappings":"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","file":"cms~cms9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-content',[_c('v-container',[_c('v-card',[_c('v-card-title',{staticClass:\"justify-content-center\"},[(_vm.formTitle != 'undefined undefined')?_c('h2',{staticClass:\"pt-4 font-weight-bold panel-title-header first-color\"},[_vm._v(\"\\n          \"+_vm._s(_vm.$route.path.split(\"/\")[2] == \"realizations\"\n              ? \"Realizacje\"\n              : \"Galeria - \" + _vm.formTitle)+\"\\n        \")]):_vm._e()]),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-0\"}),_vm._v(\" \"),_c('v-form',{ref:\"form\"},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"8\"}},[_c('div',{staticClass:\"pa-5\"},[_c('div',{staticClass:\"gallery-container\"},[_c('v-row',_vm._l((_vm.gallery),function(photo){return _c('v-col',{key:photo.path,attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"4\"}},[_c('div',{staticClass:\"position-relative\"},[_c('Picture',{attrs:{\"classImg\":\"img-fluid\",\"src\":_vm.getUrl(photo.path)}}),_vm._v(\" \"),_c('div',{staticClass:\"close-icon-container\"},[(photo.id)?_c('v-icon',{staticClass:\"pr-1 pt-1 close-icon\",attrs:{\"color\":\"grey\"},on:{\"click\":function($event){return _vm.destroy(photo.id)}}},[_vm._v(\"mdi-close\")]):_vm._e()],1)],1),_vm._v(\" \"),_c('v-text-field',{attrs:{\"label\":\"Tekst alternatywny\"},model:{value:(photo.photo_alt),callback:function ($$v) {_vm.$set(photo, \"photo_alt\", $$v)},expression:\"photo.photo_alt\"}})],1)}),1)],1)])]),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\",\"md\":\"4\"}},[_c('div',{staticClass:\"pa-5 d-flex flex-column justify-content-between\"},[_c('div',[_c('GalleryPicker',{attrs:{\"apiGallery\":_vm.apiGallery},on:{\"updateDeletedPhoto\":_vm.updateDeletedPhoto,\"loadedImage\":_vm.setImagePlaceholder}})],1)])])],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mb-0\"}),_vm._v(\" \"),_c('v-card-actions',{staticClass:\"pa-4\"},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"disabled\":_vm.gallery.length === 0,\"color\":\"primary\"},on:{\"click\":_vm.send}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-check\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Zatwierdź\")])],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"mr-2\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Anuluj\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-card flat>\r\n    <v-card-text>\r\n      <v-row class=\"d-flex justify-content-center\">\r\n        <v-col lg=\"4\" sm=\"12\" md=\"4\">\r\n          <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n            <v-file-input\r\n              id=\"file\"\r\n              v-model=\"file\"\r\n              multiple\r\n              show-size\r\n              counter\r\n              label=\"Zdjęcie\"\r\n              :accept=\"photoTypes\"\r\n              prepend-icon=\"mdi-camera\"\r\n              :rules=\"rules\"\r\n            ></v-file-input>\r\n            <v-btn\r\n              :disabled=\"loading || file.length === 0\"\r\n              :loading=\"loading\"\r\n              @click=\"submit\"\r\n              class=\"mt-3\"\r\n              color=\"success\"\r\n            >\r\n              <v-icon left>mdi-check</v-icon>\r\n              <span>Wyślij</span>\r\n            </v-btn>\r\n          </v-form>\r\n        </v-col>\r\n      </v-row>\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport isPhoto from \"@/helpers/files/is-photo\";\r\nimport photoTypes from \"@/helpers/files/photo-types\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      file: [],\r\n      loading: false,\r\n      valid: true,\r\n\r\n      rules: [\r\n        (value) => {\r\n          const MAX_SIZE = 25 * 1000000;\r\n          let invalidSizeFileNames = [];\r\n          for (let file of value) {\r\n            if (file.size > MAX_SIZE) invalidSizeFileNames.push(file.name);\r\n          }\r\n          return (\r\n            invalidSizeFileNames.length === 0 ||\r\n            `Pliki [${invalidSizeFileNames.join(\r\n              \", \"\r\n            )}] nie powinny być większe niż 25 MB!`\r\n          );\r\n        },\r\n        (value) => {\r\n          let invalidSizeFileTypes = [];\r\n          for (let file of value) {\r\n            if (!isPhoto(file.type)) invalidSizeFileTypes.push(file.name);\r\n          }\r\n          return (\r\n            invalidSizeFileTypes.length === 0 ||\r\n            `Pliki [${invalidSizeFileTypes.join(\", \")}] powinny być zdjęciami!`\r\n          );\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    photoTypes() {\r\n      return photoTypes.join(\", \");\r\n    },\r\n    img() {\r\n      return this.file.length == 0\r\n        ? \"https://via.placeholder.com/250\"\r\n        : URL.createObjectURL(this.file[0]);\r\n    },\r\n  },\r\n  methods: {\r\n    submit() {\r\n      if (this.file.length == 0 || !this.valid) return;\r\n      this.loading = true;\r\n      for (let i = 0; i < this.file.length; i++) {\r\n        let formData = new FormData();\r\n        formData.append(\"file\", this.file[i]);\r\n        axios\r\n          .post(\"/api/media/add\", formData)\r\n          .then(() => {\r\n            this.loading = false;\r\n            this.$emit(\"loadPhotos\");\r\n            this.file = [];\r\n            this.$store.commit(\"setSnackbar\", \"Pomyślnie dodano!\");\r\n          })\r\n          .catch((err) => {\r\n            this.loading = false;\r\n            console.error(err);\r\n            this.$store.commit(\"setSnackbar\", \"Coś poszło nie tak...\");\r\n          });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddPhotos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddPhotos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddPhotos.vue?vue&type=template&id=23a5d047&\"\nimport script from \"./AddPhotos.vue?vue&type=script&lang=js&\"\nexport * from \"./AddPhotos.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',[_c('v-row',{staticClass:\"d-flex justify-content-center\"},[_c('v-col',{attrs:{\"lg\":\"4\",\"sm\":\"12\",\"md\":\"4\"}},[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-file-input',{attrs:{\"id\":\"file\",\"multiple\":\"\",\"show-size\":\"\",\"counter\":\"\",\"label\":\"Zdjęcie\",\"accept\":_vm.photoTypes,\"prepend-icon\":\"mdi-camera\",\"rules\":_vm.rules},model:{value:(_vm.file),callback:function ($$v) {_vm.file=$$v},expression:\"file\"}}),_vm._v(\" \"),_c('v-btn',{staticClass:\"mt-3\",attrs:{\"disabled\":_vm.loading || _vm.file.length === 0,\"loading\":_vm.loading,\"color\":\"success\"},on:{\"click\":_vm.submit}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-check\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Wyślij\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-row>\r\n    <v-row justify=\"center\" class=\"mt-5 mb-2 px-3 gallery-picker\">\r\n      <v-dialog\r\n        v-model=\"dialog\"\r\n        persistent\r\n        style=\"background-color: white !important\"\r\n      >\r\n        <template v-slot:activator=\"{ on, attrs }\">\r\n          <v-btn color=\"primary\" dark v-bind=\"attrs\" v-on=\"on\" class=\"w-100\">\r\n            {{ title || \"Dodaj galerię\" }}\r\n          </v-btn>\r\n        </template>\r\n        <v-card>\r\n          <div class=\"gallery-picker-menu\">\r\n            <v-card-title\r\n              class=\"d-flex justify-content-between position-relative\"\r\n            >\r\n              <div class=\"d-flex align-items-center flex-wrap\">\r\n                <div>GalleryPicker</div>\r\n                <div class=\"ml-3\">\r\n                  <v-text-field\r\n                    label=\"Szukaj\"\r\n                    prepend-icon=\"mdi-magnify\"\r\n                    v-model=\"search\"\r\n                    @change=\"searchPhoto\"\r\n                  ></v-text-field>\r\n                </div>\r\n              </div>\r\n              <v-icon class=\"gallery-picker-close\" @click=\"dialog = false\"\r\n                >mdi-close</v-icon\r\n              >\r\n            </v-card-title>\r\n            <v-tabs v-model=\"tab\" background-color=\"primary\" dark>\r\n              <v-tab v-for=\"tab in tabs\" :key=\"tab\">\r\n                {{ tab }}\r\n              </v-tab>\r\n            </v-tabs>\r\n          </div>\r\n          <v-tabs-items v-model=\"tab\">\r\n            <v-tab-item>\r\n              <v-card flat>\r\n                <v-card-text>\r\n                  <v-container>\r\n                    <v-row class=\"d-flex align-items-center\">\r\n                      <v-col\r\n                        @mouseout=\"closeIcon = 0\"\r\n                        @mouseover=\"showCloseIcon(photo.id)\"\r\n                        class=\"d-flex align-items-between flex-column\"\r\n                        lg=\"2\"\r\n                        md=\"3\"\r\n                        cols=\"6\"\r\n                        sm=\"4\"\r\n                        v-for=\"photo in filteredPhotos\"\r\n                        :key=\"photo.id\"\r\n                      >\r\n                        <div class=\"d-flex justify-content-end\">\r\n                          <v-icon\r\n                            @click=\"deletePhoto(photo.id)\"\r\n                            :color=\"closeIcon == photo.id ? 'black' : 'white'\"\r\n                            class=\"close-icon\"\r\n                            >mdi-close</v-icon\r\n                          >\r\n                        </div>\r\n                        <v-tooltip top>\r\n                          <template v-slot:activator=\"{ on, attrs }\">\r\n                            <div\r\n                              @click=\"setPhotoClass(photo.id)\"\r\n                              v-on=\"on\"\r\n                              v-bind=\"attrs\"\r\n                              class=\"position-relative\"\r\n                            >\r\n                              <Transition name=\"fade\">\r\n                                <div\r\n                                  v-if=\"activePhotos.includes(photo.id)\"\r\n                                  class=\"mask gallery-picker-photo-mask\"\r\n                                ></div>\r\n                              </Transition>\r\n\r\n                              <Picture\r\n                                classImg=\"gallery-picker-photo\"\r\n                                :src=\"url(photo.path)\"\r\n                              />\r\n                            </div>\r\n                          </template>\r\n                          <span>{{ photo.path }}</span>\r\n                        </v-tooltip>\r\n                      </v-col>\r\n                      <v-col cols=\"12\">\r\n                        <v-pagination\r\n                          class=\"file-picker-pagination\"\r\n                          v-model=\"page\"\r\n                          :length=\"Math.ceil(photos.length / 12)\"\r\n                        ></v-pagination>\r\n                      </v-col>\r\n                    </v-row>\r\n                  </v-container>\r\n                </v-card-text>\r\n              </v-card>\r\n            </v-tab-item>\r\n            <v-tab-item>\r\n              <AddPhotos @loadPhotos=\"loadPhotos\" />\r\n            </v-tab-item>\r\n          </v-tabs-items>\r\n        </v-card>\r\n      </v-dialog>\r\n    </v-row>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport AddPhotos from \"@/components/gallery-picker/AddPhotos.vue\";\r\nimport url from \"@/helpers/photo/url.js\";\r\nimport Picture from \"@/components/picture/Picture\";\r\n\r\nexport default {\r\n  props: [\"apiGallery\", \"title\"],\r\n  data() {\r\n    return {\r\n      dialog: false,\r\n      tab: null,\r\n      tabs: [\"Wybierz zdjęcia\", \"Dodaj Nowe Zdjęcie\"],\r\n      photos: [],\r\n      activePhotos: [],\r\n      multiple: true,\r\n      closeIcon: 0,\r\n      placeholder: \"/storage/img/placeholder/250.png\",\r\n      search: \"\",\r\n      page: 1,\r\n    };\r\n  },\r\n  components: {\r\n    AddPhotos,\r\n    Picture,\r\n  },\r\n  watch: {\r\n    apiGallery() {\r\n      this.loadPhotos();\r\n      this.activePhotos = [];\r\n    },\r\n  },\r\n  computed: {\r\n    filteredPhotos() {\r\n      let filteredPhotos = [];\r\n      for (let photo of this.photos) {\r\n        if (photo.path.toLowerCase().includes(this.search.toLowerCase())) {\r\n          filteredPhotos.push(photo);\r\n        }\r\n      }\r\n      return filteredPhotos\r\n        .reverse()\r\n        .slice((this.page - 1) * 12, (this.page - 1) * 12 + 12);\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    url,\r\n    showCloseIcon(id) {\r\n      this.closeIcon = id;\r\n    },\r\n    isActivePhotoDeleted(id) {\r\n      if (this.activePhotoPath !== null) {\r\n        for (let photo of this.photos) {\r\n          if (photo.id == id && this.activePhotos.includes(id)) {\r\n            this.$emit(\"updateDeletedPhoto\", photo.path);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    setApiGallery() {\r\n      if (this.apiGallery) {\r\n        let photos = [];\r\n        for (let i = 0; i < this.photos.length; i++) {\r\n          if (!this.apiGallery.some((a) => a.path == this.photos[i].path)) {\r\n            if (!photos.includes(this.photos[i])) photos.push(this.photos[i]);\r\n          }\r\n        }\r\n        this.photos = photos;\r\n      }\r\n    },\r\n    loadPhotos() {\r\n      axios.get(\"/api/media/get_photos\").then((res) => {\r\n        this.photos = res.data;\r\n\r\n        this.setApiGallery();\r\n      });\r\n    },\r\n\r\n    deletePhoto(id) {\r\n      if (confirm(\"Czy na pewno?\")) {\r\n        axios\r\n          .delete(\"/api/media/delete/\" + id)\r\n          .then((res) => {\r\n            this.isActivePhotoDeleted(id);\r\n            this.loadPhotos();\r\n          })\r\n          .catch((err) => console.log(err));\r\n      }\r\n    },\r\n    getPhotoLinks() {\r\n      let links = [];\r\n\r\n      for (let i = 0; i < this.photos.length; i++) {\r\n        for (let j = 0; j < this.activePhotos.length; j++) {\r\n          if (this.photos[i].id == this.activePhotos[j])\r\n            links[0] = this.photos[i];\r\n        }\r\n      }\r\n      return links;\r\n    },\r\n    sendImageIdToPlaceholder() {\r\n      let data = [];\r\n      for (let activePhoto of this.activePhotos) {\r\n        data.push(this.getPhotoById(activePhoto));\r\n      }\r\n\r\n      this.$emit(\"loadedImage\", data);\r\n    },\r\n    setPhotoClass(id) {\r\n      if (!this.activePhotos.includes(id)) this.activePhotos.push(id);\r\n      else this.activePhotos.splice(this.activePhotos.indexOf(id), 1);\r\n\r\n      this.sendImageIdToPlaceholder();\r\n    },\r\n    getPhotoById(id) {\r\n      for (let i = 0; i < this.photos.length; i++) {\r\n        if (this.photos[i].id == id) {\r\n          return this.photos[i].path;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.loadPhotos();\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.fade-enter-active {\r\n  animation: fade 0.2s;\r\n}\r\n.fade-leave-active {\r\n  animation: fade 0.2s reverse;\r\n}\r\n@keyframes fade {\r\n  0% {\r\n    opacity: 0;\r\n  }\r\n\r\n  100% {\r\n    opacity: 0.7;\r\n  }\r\n}\r\n.gallery-picker-menu {\r\n  position: sticky;\r\n  width: 100%;\r\n  z-index: 1;\r\n  background: white;\r\n  top: 0;\r\n  @media (max-width: 992px) {\r\n    position: sticky;\r\n    width: unset;\r\n  }\r\n}\r\n.gallery-picker-photo {\r\n  cursor: pointer;\r\n  height: auto;\r\n  width: 100%;\r\n  &-mask {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 1;\r\n    background-color: var(--first-color);\r\n    opacity: 0.7;\r\n    cursor: pointer;\r\n    filter: drop-shadow(2px 4px 6px black);\r\n  }\r\n}\r\n.gallery-picker-close {\r\n  position: absolute !important;\r\n  top: 14%;\r\n  right: 2%;\r\n}\r\n\r\n.v-dialog {\r\n  background-color: white !important;\r\n}\r\n</style>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GalleryPicker.vue?vue&type=template&id=708da6ba&\"\nimport script from \"./GalleryPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./GalleryPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GalleryPicker.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-row',{staticClass:\"mt-5 mb-2 px-3 gallery-picker\",attrs:{\"justify\":\"center\"}},[_c('v-dialog',{staticStyle:{\"background-color\":\"white !important\"},attrs:{\"persistent\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticClass:\"w-100\",attrs:{\"color\":\"primary\",\"dark\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\"\\n          \"+_vm._s(_vm.title || \"Dodaj galerię\")+\"\\n        \")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_vm._v(\" \"),_c('v-card',[_c('div',{staticClass:\"gallery-picker-menu\"},[_c('v-card-title',{staticClass:\"d-flex justify-content-between position-relative\"},[_c('div',{staticClass:\"d-flex align-items-center flex-wrap\"},[_c('div',[_vm._v(\"GalleryPicker\")]),_vm._v(\" \"),_c('div',{staticClass:\"ml-3\"},[_c('v-text-field',{attrs:{\"label\":\"Szukaj\",\"prepend-icon\":\"mdi-magnify\"},on:{\"change\":_vm.searchPhoto},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1)]),_vm._v(\" \"),_c('v-icon',{staticClass:\"gallery-picker-close\",on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"mdi-close\")])],1),_vm._v(\" \"),_c('v-tabs',{attrs:{\"background-color\":\"primary\",\"dark\":\"\"},model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},_vm._l((_vm.tabs),function(tab){return _c('v-tab',{key:tab},[_vm._v(\"\\n              \"+_vm._s(tab)+\"\\n            \")])}),1)],1),_vm._v(\" \"),_c('v-tabs-items',{model:{value:(_vm.tab),callback:function ($$v) {_vm.tab=$$v},expression:\"tab\"}},[_c('v-tab-item',[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',[_c('v-container',[_c('v-row',{staticClass:\"d-flex align-items-center\"},[_vm._l((_vm.filteredPhotos),function(photo){return _c('v-col',{key:photo.id,staticClass:\"d-flex align-items-between flex-column\",attrs:{\"lg\":\"2\",\"md\":\"3\",\"cols\":\"6\",\"sm\":\"4\"},on:{\"mouseout\":function($event){_vm.closeIcon = 0},\"mouseover\":function($event){return _vm.showCloseIcon(photo.id)}}},[_c('div',{staticClass:\"d-flex justify-content-end\"},[_c('v-icon',{staticClass:\"close-icon\",attrs:{\"color\":_vm.closeIcon == photo.id ? 'black' : 'white'},on:{\"click\":function($event){return _vm.deletePhoto(photo.id)}}},[_vm._v(\"mdi-close\")])],1),_vm._v(\" \"),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('div',_vm._g(_vm._b({staticClass:\"position-relative\",on:{\"click\":function($event){return _vm.setPhotoClass(photo.id)}}},'div',attrs,false),on),[_c('Transition',{attrs:{\"name\":\"fade\"}},[(_vm.activePhotos.includes(photo.id))?_c('div',{staticClass:\"mask gallery-picker-photo-mask\"}):_vm._e()]),_vm._v(\" \"),_c('Picture',{attrs:{\"classImg\":\"gallery-picker-photo\",\"src\":_vm.url(photo.path)}})],1)]}}],null,true)},[_vm._v(\" \"),_c('span',[_vm._v(_vm._s(photo.path))])])],1)}),_vm._v(\" \"),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-pagination',{staticClass:\"file-picker-pagination\",attrs:{\"length\":Math.ceil(_vm.photos.length / 12)},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}})],1)],2)],1)],1)],1)],1),_vm._v(\" \"),_c('v-tab-item',[_c('AddPhotos',{on:{\"loadPhotos\":_vm.loadPhotos}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-content>\r\n    <v-container>\r\n      <v-card>\r\n        <v-card-title class=\"justify-content-center\">\r\n          <h2\r\n            v-if=\"formTitle != 'undefined undefined'\"\r\n            class=\"pt-4 font-weight-bold panel-title-header first-color\"\r\n          >\r\n            {{\r\n              $route.path.split(\"/\")[2] == \"realizations\"\r\n                ? \"Realizacje\"\r\n                : \"Galeria - \" + formTitle\r\n            }}\r\n          </h2>\r\n        </v-card-title>\r\n        <v-divider class=\"mt-0\"></v-divider>\r\n        <v-form ref=\"form\">\r\n          <v-row>\r\n            <v-col cols=\"12\" md=\"8\">\r\n              <div class=\"pa-5\">\r\n                <div class=\"gallery-container\">\r\n                  <v-row>\r\n                    <v-col\r\n                      v-for=\"photo in gallery\"\r\n                      :key=\"photo.path\"\r\n                      cols=\"12\"\r\n                      sm=\"6\"\r\n                      md=\"4\"\r\n                    >\r\n                      <div class=\"position-relative\">\r\n                        <Picture\r\n                          classImg=\"img-fluid\"\r\n                          :src=\"getUrl(photo.path)\"\r\n                        />\r\n                        <div class=\"close-icon-container\">\r\n                          <v-icon\r\n                            v-if=\"photo.id\"\r\n                            @click=\"destroy(photo.id)\"\r\n                            class=\"pr-1 pt-1 close-icon\"\r\n                            color=\"grey\"\r\n                            >mdi-close</v-icon\r\n                          >\r\n                        </div>\r\n                      </div>\r\n                      <v-text-field\r\n                        label=\"Tekst alternatywny\"\r\n                        v-model=\"photo.photo_alt\"\r\n                      ></v-text-field>\r\n                    </v-col>\r\n                  </v-row>\r\n                </div>\r\n              </div>\r\n            </v-col>\r\n\r\n            <v-col cols=\"12\" md=\"4\">\r\n              <div class=\"pa-5 d-flex flex-column justify-content-between\">\r\n                <div>\r\n                  <GalleryPicker\r\n                    @updateDeletedPhoto=\"updateDeletedPhoto\"\r\n                    @loadedImage=\"setImagePlaceholder\"\r\n                    :apiGallery=\"apiGallery\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </v-col>\r\n          </v-row>\r\n          <v-divider class=\"mb-0\"></v-divider>\r\n          <v-card-actions class=\"pa-4\">\r\n            <v-btn\r\n              :disabled=\"gallery.length === 0\"\r\n              color=\"primary\"\r\n              class=\"mr-2\"\r\n              @click=\"send\"\r\n            >\r\n              <v-icon left>mdi-check</v-icon>\r\n              <span>Zatwierdź</span>\r\n            </v-btn>\r\n\r\n            <v-btn color=\"error\" class=\"mr-2\" @click=\"$router.go(-1)\">\r\n              <v-icon left>mdi-close</v-icon>\r\n              <span>Anuluj</span>\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-form>\r\n      </v-card>\r\n    </v-container>\r\n  </v-content>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport GalleryPicker from \"@/components/gallery-picker/GalleryPicker\";\r\nimport SnackbarAlerts from \"@/data/snackbar-alerts.js\";\r\nimport url from \"@/helpers/photo/url.js\";\r\nimport Picture from \"@/components/picture/Picture.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    GalleryPicker,\r\n    Picture,\r\n  },\r\n  data: () => ({\r\n    name: \"\",\r\n    rules: {\r\n      titleRules: [(v) => !!v || \"Tytuł jest wymagany!\"],\r\n    },\r\n    apiGallery: [],\r\n    pickedGallery: [],\r\n    gallery: [],\r\n    currentObject: {},\r\n    activePhoto: \"https://via.placeholder.com/250\",\r\n    img: \"\",\r\n  }),\r\n  computed: {\r\n    formTitle() {\r\n      if (this.$route.path.split(\"/\")[2] == \"players\")\r\n        return `${this.currentObject.first_name} ${this.currentObject.last_name}`;\r\n      else return this.currentObject.title;\r\n    },\r\n  },\r\n  methods: {\r\n    getUrl(src) {\r\n      return url(src);\r\n    },\r\n    getImageDefaultPlaceholder() {\r\n      return \"https://via.placeholder.com/250\";\r\n    },\r\n    setGallery(event) {\r\n      let pickedGallery = [];\r\n      for (let photo of event) {\r\n        pickedGallery.push({\r\n          path: photo,\r\n          photo_alt: \"\",\r\n          item_id: this.$route.params.id,\r\n          table_name: this.$route.params.table,\r\n        });\r\n      }\r\n      this.pickedGallery = pickedGallery;\r\n      this.gallery = [...this.apiGallery, ...this.pickedGallery];\r\n    },\r\n    setImagePlaceholder(event) {\r\n      if (event === \"placeholder\") {\r\n        (this.img = \"\"), (this.activePhoto = this.getImageDefaultPlaceholder());\r\n      } else {\r\n        this.setGallery(event);\r\n        this.activePhoto = url(event);\r\n      }\r\n    },\r\n    getFormData() {\r\n      return this.gallery;\r\n    },\r\n    resetForm() {\r\n      this.activePhoto = this.getImageDefaultPlaceholder();\r\n    },\r\n    setLoading(state) {\r\n      this.$store.commit(\"loading\", state);\r\n    },\r\n    add(formData) {\r\n      axios\r\n        .post(`/api/gallery/add`, formData, {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.setLoading(false);\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.success);\r\n          this.loadGallery();\r\n          this.resetForm();\r\n        })\r\n        .catch((err) => {\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.error);\r\n          this.setLoading(false);\r\n        });\r\n    },\r\n    edit(formData) {\r\n      axios\r\n        .put(`/api/gallery/edit`, formData, {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.setLoading(false);\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.success);\r\n          this.loadGallery();\r\n        })\r\n        .catch((err) => {\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.error);\r\n          this.setLoading(false);\r\n          console.log(err);\r\n        });\r\n    },\r\n    destroy(id) {\r\n      if (!confirm(\"Czy na pewno chcesz usunąć to zdjęcie z galerii?\")) return;\r\n      this.setLoading(true);\r\n      axios\r\n        .delete(\"/api/gallery/delete/\" + id)\r\n        .then((res) => {\r\n          this.setLoading(false);\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.success);\r\n          this.loadGallery();\r\n        })\r\n        .catch((err) => {\r\n          this.$store.commit(\"setSnackbar\", SnackbarAlerts.error);\r\n          this.setLoading(false);\r\n          console.log(err);\r\n        });\r\n    },\r\n    send() {\r\n      if (this.getFormData().length > 0) this.setLoading(true);\r\n      for (let photo of this.getFormData())\r\n        photo.id ? this.edit(photo) : this.add(photo);\r\n    },\r\n    updateDeletedPhoto(path) {\r\n      this.gallery.splice(\r\n        this.gallery.findIndex((photo) => photo.path == path)\r\n      );\r\n    },\r\n    loadCurrentObject() {\r\n      axios\r\n        .get(\r\n          `/api/${this.$route.path.split(\"/\")[2]}/get_one/${\r\n            this.$route.params.id\r\n          }`\r\n        )\r\n        .then((res) => {\r\n          this.currentObject = res.data;\r\n        });\r\n    },\r\n    loadGallery() {\r\n      axios\r\n        .get(\r\n          `/api/gallery/get_photos/${this.$route.path.split(\"/\")[2]}/${\r\n            this.$route.params.id\r\n          }`\r\n        )\r\n        .then((res) => {\r\n          this.apiGallery = res.data;\r\n          this.gallery = res.data;\r\n          this.setLoading(false);\r\n        });\r\n    },\r\n  },\r\n\r\n  created() {\r\n    if (this.$route.path.split(\"/\")[2] != \"realizations\")\r\n      this.loadCurrentObject();\r\n    this.loadGallery();\r\n    this.setLoading(true);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.gallery-form-photo {\r\n  background-size: cover;\r\n  width: 100%;\r\n  height: auto;\r\n  margin: auto;\r\n}\r\n\r\n.close-icon {\r\n  /*filter: invert(1);*/\r\n}\r\n.close-icon-container {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: flex-start;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gallery.vue?vue&type=template&id=56c5f5da&\"\nimport script from \"./Gallery.vue?vue&type=script&lang=js&\"\nexport * from \"./Gallery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Gallery.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".fade-enter-active {\\n  -webkit-animation: fade 0.2s;\\n          animation: fade 0.2s;\\n}\\n.fade-leave-active {\\n  animation: fade 0.2s reverse;\\n}\\n@-webkit-keyframes fade {\\n0% {\\n    opacity: 0;\\n}\\n100% {\\n    opacity: 0.7;\\n}\\n}\\n@keyframes fade {\\n0% {\\n    opacity: 0;\\n}\\n100% {\\n    opacity: 0.7;\\n}\\n}\\n.gallery-picker-menu {\\n  position: -webkit-sticky;\\n  position: sticky;\\n  width: 100%;\\n  z-index: 1;\\n  background: white;\\n  top: 0;\\n}\\n@media (max-width: 992px) {\\n.gallery-picker-menu {\\n    position: -webkit-sticky;\\n    position: sticky;\\n    width: unset;\\n}\\n}\\n.gallery-picker-photo {\\n  cursor: pointer;\\n  height: auto;\\n  width: 100%;\\n}\\n.gallery-picker-photo-mask {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  z-index: 1;\\n  background-color: var(--first-color);\\n  opacity: 0.7;\\n  cursor: pointer;\\n  filter: drop-shadow(2px 4px 6px black);\\n}\\n.gallery-picker-close {\\n  position: absolute !important;\\n  top: 14%;\\n  right: 2%;\\n}\\n.v-dialog {\\n  background-color: white !important;\\n}\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=style&index=0&lang=scss&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=style&index=0&lang=scss&\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=style&index=0&lang=scss&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../../node_modules/style-loader/index.js!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.gallery-form-photo {\\r\\n  background-size: cover;\\r\\n  width: 100%;\\r\\n  height: auto;\\r\\n  margin: auto;\\n}\\n.close-icon {\\r\\n  /*filter: invert(1);*/\\n}\\n.close-icon-container {\\r\\n  position: absolute;\\r\\n  left: 0;\\r\\n  top: 0;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  display: flex;\\r\\n  justify-content: flex-end;\\r\\n  align-items: flex-start;\\n}\\r\\n\", \"\"]);\n\n// exports\n","export * from \"-!../../../../node_modules/style-loader/index.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--7-3!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryPicker.vue?vue&type=style&index=0&lang=scss&\"","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=style&index=0&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=style&index=0&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--6-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-2!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=style&index=0&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}