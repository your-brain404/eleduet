{"version":3,"sources":["webpack:///./resources/js/views/admin/forms/Mails.vue?a7d5","webpack:///resources/js/components/select/Users.vue","webpack:///./resources/js/components/select/Users.vue?4754","webpack:///resources/js/views/admin/forms/Mails.vue","webpack:///./resources/js/views/admin/forms/Mails.vue?41b3","webpack:///./resources/js/components/select/Users.vue","webpack:///./resources/js/components/select/Users.vue?187d","webpack:///./resources/js/views/admin/forms/Mails.vue"],"names":["_vm","this","_h","$createElement","_c","_self","attrs","searchUser","itemText","scopedSlots","_u","key","fn","on","model","value","callback","$$v","search","expression","_v","toggle","selectedUsers","length","_s","icon","selectPlayers","playersIcon","staticClass","proxy","ref","item","name","mail","email","user","newsletter","i","valid","rules","titleRules","$set","$event","users","loading","saveMail","$router","go"],"mappings":"qGAAA,I,ooCC8CA,IC9C2M,ED8C3M,CACA,KADA,WAEA,OACA,SACA,iBACA,UACA,cACA,uBAIA,OACA,cADA,WAEA,wCAEA,OAJA,WAKA,+CAIA,UACA,cADA,WAEA,sDAEA,eAJA,WAKA,yDAEA,KAPA,WAQA,0CACA,oCACA,8BAEA,YAZA,WAaA,6EAIA,SACA,cADA,WAIA,GAFA,+CACA,sBACA,kCACA,YADA,IACA,0CACA,gDAFA,iCAOA,SAXA,WAWA,I,EAAA,c,EAAA,wGACA,gDACA,kBADA,OAEA,YACA,4EAJA,0C,kLAOA,SAlBA,SAkBA,GACA,kDAEA,OArBA,WAqBA,WACA,0BACA,2BACA,gBACA,mBAEA,oCAIA,WA/BA,WAgCA,IADA,EACA,KADA,IAEA,YAFA,IAEA,2CACA,iIAHA,8BAKA,WAGA,QA5EA,WA6EA,kB,yyCE1DA,ICjEiN,EDiEjN,CACE,KADF,WAEI,MAAJ,CACM,MAAN,GACM,KAAN,CACQ,QAAR,GACQ,QAAR,GACQ,YAAR,GAEM,MAAN,GACM,SAAN,EACM,OAAN,EACM,MAAN,CACQ,WAAR,aAAU,QAAV,iCAIE,WAAF,CACI,OE5EY,YACd,GCRW,WAAa,IAAIA,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQN,EAAIO,aAAa,gBAAgB,GAAG,YAAYP,EAAIQ,SAAS,MAAQ,cAAc,SAAW,GAAG,MAAQ,IAAIC,YAAYT,EAAIU,GAAG,CAAC,CAACC,IAAI,eAAeC,GAAG,WAAW,MAAO,CAACR,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,UAAUO,GAAG,CAAC,MAAQb,EAAIO,YAAYO,MAAM,CAACC,MAAOf,EAAU,OAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,OAAOD,GAAKE,WAAW,aAAa,GAAGnB,EAAIoB,GAAG,KAAKhB,EAAG,cAAc,CAACE,MAAM,CAAC,OAAS,IAAIO,GAAG,CAAC,MAAQb,EAAIqB,SAAS,CAACjB,EAAG,qBAAqB,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQN,EAAIsB,cAAcC,OAAS,EAAI,UAAY,KAAK,CAACvB,EAAIoB,GAAG,iBAAiBpB,EAAIwB,GAAGxB,EAAIyB,MAAM,mBAAmB,GAAGzB,EAAIoB,GAAG,KAAKhB,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIoB,GAAG,mDAAmD,IAAI,GAAGpB,EAAIoB,GAAG,KAAKhB,EAAG,cAAc,CAACE,MAAM,CAAC,OAAS,IAAIO,GAAG,CAAC,MAAQb,EAAI0B,gBAAgB,CAACtB,EAAG,qBAAqB,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQN,EAAIsB,cAAcC,OAAS,EAAI,UAAY,KAAK,CAACvB,EAAIoB,GAAG,iBAAiBpB,EAAIwB,GAAGxB,EAAI2B,aAAa,mBAAmB,GAAG3B,EAAIoB,GAAG,KAAKhB,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACJ,EAAIoB,GAAG,gDAAgD,IAAI,GAAGpB,EAAIoB,GAAG,KAAKhB,EAAG,YAAY,CAACwB,YAAY,WAAWC,OAAM,GAAM,CAAClB,IAAI,YAAYC,GAAG,SAASkB,GAC/0C,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAC3B,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIoB,GAAGpB,EAAIwB,GAAGO,EAAKC,cAAclB,MAAM,CAACC,MAAOf,EAAiB,cAAEgB,SAAS,SAAUC,GAAMjB,EAAIsB,cAAcL,GAAKE,WAAW,oBAAoB,KAC5K,IDQpB,EACA,KACA,KACA,M,SFuEA,QAAF,CACI,WADJ,SACA,GACM,EAAN,qCAEI,SAJJ,SAIA,GAAM,IAAN,OAAM,OAAN,yBAAQ,IAAR,QAAQ,OAAR,0DACA,IADA,IAEA,SAFA,gEAEA,EAFA,QAGgBc,EAAKC,MAAQC,EAAKD,MAClBD,EAAKG,WAAa,EACdC,GAAK,EAAzB,6BALA,UAMA,IACA,0BACA,kBACkB,EAAlB,WACA,mBACA,gBACA,cACA,sBAEA,sBACA,gBACA,cACA,wBAEA,qBACA,iBACsB,EAAtB,mBACsB,EAAtB,6BACsB,EAAtB,kBAlBA,OAsBA,YACkB,QAAlB,OACkB,EAAlB,WACkB,EAAlB,cACA,cACA,kDAjCA,QAoCgBA,IApChB,0MAuCI,gBA3CJ,SA2CA,GAAM,IAAN,OAAM,OAAN,yBAAQ,IAAR,IAAQ,OAAR,iFACA,GADA,8EAEA,gBACA,0BACA,yBAJA,SAKA,IACA,+BACA,kBACA,sCAHA,OAKA,YACA,aACA,eACA,gBACA,cACA,wDAfA,0CACA,IADA,YACA,kBADA,yCACA,GADA,eACA,IADA,6DAoBI,SA/DJ,WA+DM,IAAN,OACA,aAEM,KAAN,WACM,EAAN,EACA,iCACA,kBACA,2CACA,sBAJA,OAMA,YACQ,QAAR,OACQ,EAAR,WACQ,EAAR,cACA,cACA,wCI5JI,EAAY,YACd,GPRW,WAAa,IAAIrC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACA,EAAG,cAAc,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACwB,YAAY,0BAA0B,CAACxB,EAAG,KAAK,CAACwB,YAAY,yDAAyD,CAAC5B,EAAIoB,GAAG,+EAA+EpB,EAAIoB,GAAG,KAAKhB,EAAG,YAAY,CAACwB,YAAY,SAAS5B,EAAIoB,GAAG,KAAKhB,EAAG,SAAS,CAAC0B,IAAI,OAAOxB,MAAM,CAAC,kBAAkB,IAAIQ,MAAM,CAACC,MAAOf,EAAS,MAAEgB,SAAS,SAAUC,GAAMjB,EAAIsC,MAAMrB,GAAKE,WAAW,UAAU,CAACf,EAAG,QAAQ,CAACwB,YAAY,QAAQ,CAACxB,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQN,EAAIuC,MAAMC,WAAW,MAAQ,2BAA2B1B,MAAM,CAACC,MAAOf,EAAIiC,KAAY,QAAEjB,SAAS,SAAUC,GAAMjB,EAAIyC,KAAKzC,EAAIiC,KAAM,UAAWhB,IAAME,WAAW,kBAAkBnB,EAAIoB,GAAG,KAAKhB,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQN,EAAIuC,MAAMC,WAAW,KAAO,IAAI,MAAQ,mBAAmB1B,MAAM,CAACC,MAAOf,EAAIiC,KAAY,QAAEjB,SAAS,SAAUC,GAAMjB,EAAIyC,KAAKzC,EAAIiC,KAAM,UAAWhB,IAAME,WAAW,kBAAkBnB,EAAIoB,GAAG,KAAKhB,EAAG,SAAS,CAACS,GAAG,CAAC,MAAQ,SAAS6B,GAAQ1C,EAAI2C,MAAQD,OAAY,IAAI,GAAG1C,EAAIoB,GAAG,KAAKhB,EAAG,YAAY,CAACwB,YAAY,SAAS5B,EAAIoB,GAAG,KAAKhB,EAAG,iBAAiB,CAACwB,YAAY,QAAQ,CAACxB,EAAG,QAAQ,CAACwB,YAAY,OAAOtB,MAAM,CAAC,QAAUN,EAAI4C,QAAQ,UAAY5C,EAAIsC,OAA6B,GAApBtC,EAAI2C,MAAMpB,OAAY,MAAQ,WAAWV,GAAG,CAAC,MAAQb,EAAI6C,WAAW,CAACzC,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIoB,GAAG,eAAepB,EAAIoB,GAAG,KAAKhB,EAAG,OAAO,CAACJ,EAAIoB,GAAG,aAAa,GAAGpB,EAAIoB,GAAG,KAAKhB,EAAG,QAAQ,CAACwB,YAAY,OAAOtB,MAAM,CAAC,MAAQ,SAASO,GAAG,CAAC,MAAQ,SAAS6B,GAAQ,OAAO1C,EAAI8C,QAAQC,IAAI,MAAM,CAAC3C,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIoB,GAAG,eAAepB,EAAIoB,GAAG,KAAKhB,EAAG,OAAO,CAACJ,EAAIoB,GAAG,WAAW,IAAI,IAAI,IAAI,IAAI,IAAI,KAC1uD,IOUpB,EACA,KACA,KACA,MAIa,Y","file":"cms15.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-content',[_c('v-container',[_c('v-card',[_c('v-card-title',{staticClass:\"justify-content-center\"},[_c('h2',{staticClass:\" pt-4 font-weight-bold panel-title-header first-color\"},[_vm._v(\"\\n                    Wysyłanie maila do użytkowników\\n                \")])]),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-0\"}),_vm._v(\" \"),_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-row',{staticClass:\"px-5\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"color\":\"primary\",\"rules\":_vm.rules.titleRules,\"label\":\"Temat Twojej wiadomości\"},model:{value:(_vm.mail.subject),callback:function ($$v) {_vm.$set(_vm.mail, \"subject\", $$v)},expression:\"mail.subject\"}}),_vm._v(\" \"),_c('v-textarea',{attrs:{\"color\":\"primary\",\"rules\":_vm.rules.titleRules,\"rows\":\"5\",\"label\":\"Twoja wiadomość\"},model:{value:(_vm.mail.message),callback:function ($$v) {_vm.$set(_vm.mail, \"message\", $$v)},expression:\"mail.message\"}}),_vm._v(\" \"),_c('Select',{on:{\"users\":function($event){_vm.users = $event}}})],1)],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mb-0\"}),_vm._v(\" \"),_c('v-card-actions',{staticClass:\"pa-4\"},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"loading\":_vm.loading,\"disabled\":!_vm.valid || _vm.users.length == 0,\"color\":\"primary\"},on:{\"click\":_vm.saveMail}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-check\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Wyślij\")])],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"mr-2\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Wróć\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-container fluid>\r\n\t\t<v-select v-model=\"selectedUsers\" :items=\"searchUser()\" return-object :item-text=\"itemText\" label=\"Użytkownicy\" multiple chips>\r\n\t\t\t<template v-slot:prepend-item>\r\n\t\t\t\t<v-list-item>\r\n\t\t\t\t\t<v-text-field v-model=\"search\" @keyup=\"searchUser\" label=\"Znajdź\"></v-text-field>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item ripple @click=\"toggle\" >\r\n\t\t\t\t\t<v-list-item-action>\r\n\t\t\t\t\t\t<v-icon :color=\"selectedUsers.length > 0 ? 'primary' : ''\">\r\n\t\t\t\t\t\t\t{{ icon }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t</v-list-item-action>\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\tWybierz wszystkich\r\n\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item ripple @click=\"selectPlayers\" >\r\n\t\t\t\t\t<v-list-item-action>\r\n\t\t\t\t\t\t<v-icon :color=\"selectedUsers.length > 0 ? 'primary' : ''\">\r\n\t\t\t\t\t\t\t{{ playersIcon }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t</v-list-item-action>\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\tTylko zawodnicy\r\n\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-divider class=\"mt-2\"></v-divider>\r\n\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<template #selection=\"{ item }\">\r\n\t\t\t\t<v-chip color=\"primary\">{{item.name}}</v-chip>\r\n\t\t\t</template>\r\n\r\n\t\t</v-select>\r\n\t</v-container>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tusers: [],\r\n\t\t\t\tselectedUsers: [],\r\n\t\t\t\tsearch: '',\r\n\t\t\t\tcheckboxes: [],\r\n\t\t\t\tselectPlayersFlag: false \r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\t\t\tselectedUsers() {\r\n\t\t\t\tthis.$emit('users', this.selectedUsers);\r\n\t\t\t},\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.search = this.search == undefined ?  '' : this.search;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tlikesAllFruit () {\r\n\t\t\t\treturn this.selectedUsers.length === this.users.length;\r\n\t\t\t},\r\n\t\t\tlikesSomeFruit () {\r\n\t\t\t\treturn this.selectedUsers.length > 0 && !this.likesAllFruit;\r\n\t\t\t},\r\n\t\t\ticon () {\r\n\t\t\t\tif (this.likesAllFruit) return 'mdi-close-box';\r\n\t\t\t\tif (this.likesSomeFruit) return 'mdi-minus-box';\r\n\t\t\t\treturn 'mdi-checkbox-blank-outline';\r\n\t\t\t},\r\n\t\t\tplayersIcon() {\r\n\t\t\t\treturn this.selectPlayersFlag ? 'mdi-close-box' : 'mdi-checkbox-blank-outline';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tselectPlayers() {\r\n\t\t\t\tthis.selectPlayersFlag = !this.selectPlayersFlag;\r\n\t\t\t\tthis.selectedUsers = [];\r\n\t\t\t\tif(this.selectPlayersFlag) {\r\n\t\t\t\t\tfor(let user of this.users) {\r\n\t\t\t\t\t\tif(user.type == 'Zawodnik') this.selectedUsers.push(user);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync getUsers() {\r\n\t\t\t\tawait axios.get('/api/users/get_all').then(res => {\r\n\t\t\t\t\tthis.users = res.data; \r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$store.commit('setSnackbar', 'Nie udało się załadować użytkowników...');\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\titemText(item) {\r\n\t\t\t\treturn `${item.name} (${item.email})`;\r\n\t\t\t},\r\n\t\t\ttoggle() {\r\n\t\t\t\tthis.selectPlayersFlag = false;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif(this.likesAllFruit) {\r\n\t\t\t\t\t\tthis.selectedUsers = [];\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.selectedUsers = this.users.slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearchUser() {\r\n\t\t\t\tlet filteredUsers = [];\r\n\t\t\t\tfor(let user of this.users) \r\n\t\t\t\t\tuser.name.toLowerCase().includes(this.search.toLowerCase()) || user.email.toLowerCase().includes(this.search.toLowerCase()) ? filteredUsers.push(user) : true;\r\n\r\n\t\t\t\treturn filteredUsers;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getUsers();\r\n\t\t}\r\n\t}\r\n</script>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","<template>\r\n    <v-content>\r\n        <v-container>\r\n            <v-card>\r\n                <v-card-title class=\"justify-content-center\">\r\n                    <h2\r\n                        class=\" pt-4 font-weight-bold panel-title-header first-color\"\r\n                    >\r\n                        Wysyłanie maila do użytkowników\r\n                    </h2>\r\n                </v-card-title>\r\n                <v-divider class=\"mt-0\"></v-divider>\r\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\r\n                    <v-row class=\"px-5\">\r\n                        <v-col cols=\"12\">\r\n                            <v-text-field\r\n                                color=\"primary\"\r\n                                :rules=\"rules.titleRules\"\r\n                                v-model=\"mail.subject\"\r\n                                label=\"Temat Twojej wiadomości\"\r\n                            ></v-text-field>\r\n                            <v-textarea\r\n                                color=\"primary\"\r\n                                :rules=\"rules.titleRules\"\r\n                                rows=\"5\"\r\n                                v-model=\"mail.message\"\r\n                                label=\"Twoja wiadomość\"\r\n                            ></v-textarea>\r\n                            <Select @users=\"users = $event\"></Select>\r\n                        </v-col>\r\n                    </v-row>\r\n\r\n                    <v-divider class=\"mb-0\"></v-divider>\r\n\r\n                    <v-card-actions class=\"pa-4\">\r\n                        <v-btn\r\n                            :loading=\"loading\"\r\n                            :disabled=\"!valid || users.length == 0\"\r\n                            color=\"primary\"\r\n                            class=\"mr-2\"\r\n                            @click=\"saveMail\"\r\n                        >\r\n                            <v-icon left>mdi-check</v-icon>\r\n                            <span>Wyślij</span>\r\n                        </v-btn>\r\n\r\n                        <v-btn\r\n                            color=\"error\"\r\n                            class=\"mr-2\"\r\n                            @click=\"$router.go(-1)\"\r\n                        >\r\n                            <v-icon left>mdi-close</v-icon>\r\n                            <span>Wróć</span>\r\n                        </v-btn>\r\n                    </v-card-actions>\r\n                </v-form>\r\n            </v-card>\r\n        </v-container>\r\n    </v-content>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Select from \"../../../components/select/Users\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            files: [],\r\n            mail: {\r\n                subject: \"\",\r\n                message: \"\",\r\n                newsletter: true\r\n            },\r\n            users: [],\r\n            loading: false,\r\n            valid: true,\r\n            rules: {\r\n                titleRules: [v => !!v || \"To pole jest wymagane!\"]\r\n            }\r\n        };\r\n    },\r\n    components: {\r\n        Select\r\n    },\r\n    methods: {\r\n        deleteMail(mail) {\r\n            axios.delete(\"/api/mails/delete/\" + mail.id);\r\n        },\r\n        async sendMail(mail) {\r\n            let i = 0;\r\n            for (let user of this.users) {\r\n                mail.email = user.email;\r\n                mail.newsletter = 1;\r\n                if (i == this.users.length - 1) mail.delete = 1;\r\n                await axios\r\n                    .post(\"/api/mails/send\", mail)\r\n                    .then(res => {\r\n                        this.loading = false;\r\n                        if (res.data.error != undefined)\r\n                            this.$store.commit(\r\n                                \"setSnackbar\",\r\n                                res.data.error.message\r\n                            );\r\n                        else if (res.data.success != undefined)\r\n                            this.$store.commit(\r\n                                \"setSnackbar\",\r\n                                res.data.success.message\r\n                            );\r\n                        if (i == this.users.length - 1) {\r\n                            if (res.data.success) {\r\n                                this.$refs.form.reset();\r\n                                this.$refs.form.resetValidation();\r\n                                this.deleteMail(mail);\r\n                            }\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        console.log(err);\r\n                        this.loading = false;\r\n                        this.$store.commit(\r\n                            \"setSnackbar\",\r\n                            \"Przepraszamy, nie udało się wysłać maila...\"\r\n                        );\r\n                    });\r\n                i++;\r\n            }\r\n        },\r\n        async saveAttachments(mail) {\r\n            for (let i = 0; i < this.files.length; i++) {\r\n                let formData = new FormData();\r\n                formData.append(\"file\", this.files[i]);\r\n                formData.append(\"mail_id\", mail.id);\r\n                await axios\r\n                    .post(\"/api/attachments/add\", formData)\r\n                    .then(res => {\r\n                        if (i == this.files.length - 1) this.sendMail(mail);\r\n                    })\r\n                    .catch(err => {\r\n                        this.loading = false;\r\n                        console.log(err);\r\n                        this.$store.commit(\r\n                            \"setSnackbar\",\r\n                            \"Przepraszamy, nie udało się wysłać załączników...\"\r\n                        );\r\n                    });\r\n            }\r\n        },\r\n        saveMail() {\r\n            if (!this.valid) return;\r\n\r\n            this.loading = true;\r\n            axios\r\n                .post(\"/api/mails/add\", this.mail)\r\n                .then(res => {\r\n                    if (this.files.length > 0) this.saveAttachments(res.data);\r\n                    else this.sendMail(res.data);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                    this.loading = false;\r\n                    this.$store.commit(\r\n                        \"setSnackbar\",\r\n                        \"Przepraszamy, błąd serwera...\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=7d1105e4&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.searchUser(),\"return-object\":\"\",\"item-text\":_vm.itemText,\"label\":\"Użytkownicy\",\"multiple\":\"\",\"chips\":\"\"},scopedSlots:_vm._u([{key:\"prepend-item\",fn:function(){return [_c('v-list-item',[_c('v-text-field',{attrs:{\"label\":\"Znajdź\"},on:{\"keyup\":_vm.searchUser},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('v-list-item',{attrs:{\"ripple\":\"\"},on:{\"click\":_vm.toggle}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":_vm.selectedUsers.length > 0 ? 'primary' : ''}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.icon)+\"\\n\\t\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tWybierz wszystkich\\n\\t\\t\\t\\t\\t\")])],1)],1),_vm._v(\" \"),_c('v-list-item',{attrs:{\"ripple\":\"\"},on:{\"click\":_vm.selectPlayers}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":_vm.selectedUsers.length > 0 ? 'primary' : ''}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.playersIcon)+\"\\n\\t\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tTylko zawodnicy\\n\\t\\t\\t\\t\\t\")])],1)],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-2\"})]},proxy:true},{key:\"selection\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{attrs:{\"color\":\"primary\"}},[_vm._v(_vm._s(item.name))])]}}]),model:{value:(_vm.selectedUsers),callback:function ($$v) {_vm.selectedUsers=$$v},expression:\"selectedUsers\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Mails.vue?vue&type=template&id=f587b884&\"\nimport script from \"./Mails.vue?vue&type=script&lang=js&\"\nexport * from \"./Mails.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}