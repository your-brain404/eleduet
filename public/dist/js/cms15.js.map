{"version":3,"file":"js/cms15.js","mappings":"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","sources":["webpack:///./resources/js/views/admin/forms/Mails.vue?6826","webpack:///resources/js/components/select/Users.vue","webpack:///./resources/js/components/select/Users.vue?e770","webpack:///./resources/js/components/select/Users.vue","webpack:///./resources/js/components/select/Users.vue?92b7","webpack:///resources/js/views/admin/forms/Mails.vue","webpack:///./resources/js/views/admin/forms/Mails.vue?389c","webpack:///./resources/js/views/admin/forms/Mails.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-main',[_c('v-container',[_c('v-card',[_c('v-card-title',{staticClass:\"justify-content-center\"},[_c('h2',{staticClass:\"pt-4 font-weight-bold panel-title-header first-color\"},[_vm._v(\"\\n          Wysyłanie maila do użytkowników\\n        \")])]),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-0\"}),_vm._v(\" \"),_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-row',{staticClass:\"px-5\"},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"color\":\"primary\",\"rules\":_vm.rules.titleRules,\"label\":\"Temat Twojej wiadomości\"},model:{value:(_vm.mail.subject),callback:function ($$v) {_vm.$set(_vm.mail, \"subject\", $$v)},expression:\"mail.subject\"}}),_vm._v(\" \"),_c('v-textarea',{attrs:{\"color\":\"primary\",\"rules\":_vm.rules.titleRules,\"rows\":\"5\",\"label\":\"Twoja wiadomość\"},model:{value:(_vm.mail.message),callback:function ($$v) {_vm.$set(_vm.mail, \"message\", $$v)},expression:\"mail.message\"}}),_vm._v(\" \"),_c('Select',{on:{\"users\":function($event){_vm.users = $event}}})],1)],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mb-0\"}),_vm._v(\" \"),_c('v-card-actions',{staticClass:\"pa-4\"},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"loading\":_vm.loading,\"disabled\":!_vm.valid || _vm.users.length == 0,\"color\":\"primary\"},on:{\"click\":_vm.saveMail}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-check\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Wyślij\")])],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"mr-2\",attrs:{\"color\":\"error\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_c('v-icon',{attrs:{\"left\":\"\"}},[_vm._v(\"mdi-close\")]),_vm._v(\" \"),_c('span',[_vm._v(\"Wróć\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-container fluid>\r\n\t\t<v-select v-model=\"selectedUsers\" :items=\"searchUser()\" return-object :item-text=\"itemText\" label=\"Użytkownicy\" multiple chips>\r\n\t\t\t<template v-slot:prepend-item>\r\n\t\t\t\t<v-list-item>\r\n\t\t\t\t\t<v-text-field v-model=\"search\" @keyup=\"searchUser\" label=\"Znajdź\"></v-text-field>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item ripple @click=\"toggle\" >\r\n\t\t\t\t\t<v-list-item-action>\r\n\t\t\t\t\t\t<v-icon :color=\"selectedUsers.length > 0 ? 'primary' : ''\">\r\n\t\t\t\t\t\t\t{{ icon }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t</v-list-item-action>\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\tWybierz wszystkich\r\n\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-list-item ripple @click=\"selectPlayers\" >\r\n\t\t\t\t\t<v-list-item-action>\r\n\t\t\t\t\t\t<v-icon :color=\"selectedUsers.length > 0 ? 'primary' : ''\">\r\n\t\t\t\t\t\t\t{{ playersIcon }}\r\n\t\t\t\t\t\t</v-icon>\r\n\t\t\t\t\t</v-list-item-action>\r\n\t\t\t\t\t<v-list-item-content>\r\n\t\t\t\t\t\t<v-list-item-title>\r\n\t\t\t\t\t\t\tTylko zawodnicy\r\n\t\t\t\t\t\t</v-list-item-title>\r\n\t\t\t\t\t</v-list-item-content>\r\n\t\t\t\t</v-list-item>\r\n\t\t\t\t<v-divider class=\"mt-2\"></v-divider>\r\n\r\n\t\t\t</template>\r\n\t\t\t\r\n\t\t\t<template #selection=\"{ item }\">\r\n\t\t\t\t<v-chip color=\"primary\">{{item.name}}</v-chip>\r\n\t\t\t</template>\r\n\r\n\t\t</v-select>\r\n\t</v-container>\r\n</template>\r\n\r\n<script>\r\n\timport axios from 'axios'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tusers: [],\r\n\t\t\t\tselectedUsers: [],\r\n\t\t\t\tsearch: '',\r\n\t\t\t\tcheckboxes: [],\r\n\t\t\t\tselectPlayersFlag: false \r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\twatch: {\r\n\t\t\tselectedUsers() {\r\n\t\t\t\tthis.$emit('users', this.selectedUsers);\r\n\t\t\t},\r\n\t\t\tsearch() {\r\n\t\t\t\tthis.search = this.search == undefined ?  '' : this.search;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t\tlikesAllFruit () {\r\n\t\t\t\treturn this.selectedUsers.length === this.users.length;\r\n\t\t\t},\r\n\t\t\tlikesSomeFruit () {\r\n\t\t\t\treturn this.selectedUsers.length > 0 && !this.likesAllFruit;\r\n\t\t\t},\r\n\t\t\ticon () {\r\n\t\t\t\tif (this.likesAllFruit) return 'mdi-close-box';\r\n\t\t\t\tif (this.likesSomeFruit) return 'mdi-minus-box';\r\n\t\t\t\treturn 'mdi-checkbox-blank-outline';\r\n\t\t\t},\r\n\t\t\tplayersIcon() {\r\n\t\t\t\treturn this.selectPlayersFlag ? 'mdi-close-box' : 'mdi-checkbox-blank-outline';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tselectPlayers() {\r\n\t\t\t\tthis.selectPlayersFlag = !this.selectPlayersFlag;\r\n\t\t\t\tthis.selectedUsers = [];\r\n\t\t\t\tif(this.selectPlayersFlag) {\r\n\t\t\t\t\tfor(let user of this.users) {\r\n\t\t\t\t\t\tif(user.type == 'Zawodnik') this.selectedUsers.push(user);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tasync getUsers() {\r\n\t\t\t\tawait axios.get('/api/users/get_all').then(res => {\r\n\t\t\t\t\tthis.users = res.data; \r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$store.commit('setSnackbar', 'Nie udało się załadować użytkowników...');\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\titemText(item) {\r\n\t\t\t\treturn `${item.name} (${item.email})`;\r\n\t\t\t},\r\n\t\t\ttoggle() {\r\n\t\t\t\tthis.selectPlayersFlag = false;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tif(this.likesAllFruit) {\r\n\t\t\t\t\t\tthis.selectedUsers = [];\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tthis.selectedUsers = this.users.slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsearchUser() {\r\n\t\t\t\tlet filteredUsers = [];\r\n\t\t\t\tfor(let user of this.users) \r\n\t\t\t\t\tuser.name.toLowerCase().includes(this.search.toLowerCase()) || user.email.toLowerCase().includes(this.search.toLowerCase()) ? filteredUsers.push(user) : true;\r\n\r\n\t\t\t\treturn filteredUsers;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getUsers();\r\n\t\t}\r\n\t}\r\n</script>","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=7d1105e4&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.searchUser(),\"return-object\":\"\",\"item-text\":_vm.itemText,\"label\":\"Użytkownicy\",\"multiple\":\"\",\"chips\":\"\"},scopedSlots:_vm._u([{key:\"prepend-item\",fn:function(){return [_c('v-list-item',[_c('v-text-field',{attrs:{\"label\":\"Znajdź\"},on:{\"keyup\":_vm.searchUser},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('v-list-item',{attrs:{\"ripple\":\"\"},on:{\"click\":_vm.toggle}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":_vm.selectedUsers.length > 0 ? 'primary' : ''}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.icon)+\"\\n\\t\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tWybierz wszystkich\\n\\t\\t\\t\\t\\t\")])],1)],1),_vm._v(\" \"),_c('v-list-item',{attrs:{\"ripple\":\"\"},on:{\"click\":_vm.selectPlayers}},[_c('v-list-item-action',[_c('v-icon',{attrs:{\"color\":_vm.selectedUsers.length > 0 ? 'primary' : ''}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\"+_vm._s(_vm.playersIcon)+\"\\n\\t\\t\\t\\t\\t\")])],1),_vm._v(\" \"),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"\\n\\t\\t\\t\\t\\t\\tTylko zawodnicy\\n\\t\\t\\t\\t\\t\")])],1)],1),_vm._v(\" \"),_c('v-divider',{staticClass:\"mt-2\"})]},proxy:true},{key:\"selection\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-chip',{attrs:{\"color\":\"primary\"}},[_vm._v(_vm._s(item.name))])]}}]),model:{value:(_vm.selectedUsers),callback:function ($$v) {_vm.selectedUsers=$$v},expression:\"selectedUsers\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-main>\r\n    <v-container>\r\n      <v-card>\r\n        <v-card-title class=\"justify-content-center\">\r\n          <h2 class=\"pt-4 font-weight-bold panel-title-header first-color\">\r\n            Wysyłanie maila do użytkowników\r\n          </h2>\r\n        </v-card-title>\r\n        <v-divider class=\"mt-0\"></v-divider>\r\n        <v-form ref=\"form\" v-model=\"valid\">\r\n          <v-row class=\"px-5\">\r\n            <v-col cols=\"12\">\r\n              <v-text-field\r\n                color=\"primary\"\r\n                :rules=\"rules.titleRules\"\r\n                v-model=\"mail.subject\"\r\n                label=\"Temat Twojej wiadomości\"\r\n              ></v-text-field>\r\n              <v-textarea\r\n                color=\"primary\"\r\n                :rules=\"rules.titleRules\"\r\n                rows=\"5\"\r\n                v-model=\"mail.message\"\r\n                label=\"Twoja wiadomość\"\r\n              ></v-textarea>\r\n              <Select @users=\"users = $event\"></Select>\r\n            </v-col>\r\n          </v-row>\r\n\r\n          <v-divider class=\"mb-0\"></v-divider>\r\n\r\n          <v-card-actions class=\"pa-4\">\r\n            <v-btn\r\n              :loading=\"loading\"\r\n              :disabled=\"!valid || users.length == 0\"\r\n              color=\"primary\"\r\n              class=\"mr-2\"\r\n              @click=\"saveMail\"\r\n            >\r\n              <v-icon left>mdi-check</v-icon>\r\n              <span>Wyślij</span>\r\n            </v-btn>\r\n\r\n            <v-btn color=\"error\" class=\"mr-2\" @click=\"$router.go(-1)\">\r\n              <v-icon left>mdi-close</v-icon>\r\n              <span>Wróć</span>\r\n            </v-btn>\r\n          </v-card-actions>\r\n        </v-form>\r\n      </v-card>\r\n    </v-container>\r\n  </v-main>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport Select from \"../../../components/select/Users\";\r\nimport {\r\n  VMain,\r\n  VContainer,\r\n  VForm,\r\n  VCardActions,\r\n  VBtn,\r\n  VIcon,\r\n  VDivider,\r\n  VTextarea,\r\n  VTextField,\r\n  VCard,\r\n  VCardTitle,\r\n} from \"vuetify/lib\";\r\n\r\nexport default {\r\n  components: {\r\n    VMain,\r\n    VContainer,\r\n    VForm,\r\n    VCardActions,\r\n    VBtn,\r\n    VIcon,\r\n    VDivider,\r\n    VTextarea,\r\n    VTextField,\r\n    VCard,\r\n    VCardTitle,\r\n    Select,\r\n  },\r\n  data() {\r\n    return {\r\n      files: [],\r\n      mail: {\r\n        subject: \"\",\r\n        message: \"\",\r\n        newsletter: true,\r\n      },\r\n      users: [],\r\n      loading: false,\r\n      valid: true,\r\n      rules: {\r\n        titleRules: [(v) => !!v || \"To pole jest wymagane!\"],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    deleteMail(mail) {\r\n      axios.delete(\"/api/mails/delete/\" + mail.id);\r\n    },\r\n    async sendMail(mail) {\r\n      let i = 0;\r\n      for (let user of this.users) {\r\n        mail.email = user.email;\r\n        mail.newsletter = 1;\r\n        if (i == this.users.length - 1) mail.delete = 1;\r\n        await axios\r\n          .post(\"/api/mails/send\", mail)\r\n          .then((res) => {\r\n            this.loading = false;\r\n            if (res.data.error != undefined)\r\n              this.$store.commit(\"setSnackbar\", res.data.error.message);\r\n            else if (res.data.success != undefined)\r\n              this.$store.commit(\"setSnackbar\", res.data.success.message);\r\n            if (i == this.users.length - 1) {\r\n              if (res.data.success) {\r\n                this.$refs.form.reset();\r\n                this.$refs.form.resetValidation();\r\n                this.deleteMail(mail);\r\n              }\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            this.loading = false;\r\n            this.$store.commit(\r\n              \"setSnackbar\",\r\n              \"Przepraszamy, nie udało się wysłać maila...\"\r\n            );\r\n          });\r\n        i++;\r\n      }\r\n    },\r\n    async saveAttachments(mail) {\r\n      for (let i = 0; i < this.files.length; i++) {\r\n        let formData = new FormData();\r\n        formData.append(\"file\", this.files[i]);\r\n        formData.append(\"mail_id\", mail.id);\r\n        await axios\r\n          .post(\"/api/attachments/add\", formData)\r\n          .then((res) => {\r\n            if (i == this.files.length - 1) this.sendMail(mail);\r\n          })\r\n          .catch((err) => {\r\n            this.loading = false;\r\n            console.log(err);\r\n            this.$store.commit(\r\n              \"setSnackbar\",\r\n              \"Przepraszamy, nie udało się wysłać załączników...\"\r\n            );\r\n          });\r\n      }\r\n    },\r\n    saveMail() {\r\n      if (!this.valid) return;\r\n\r\n      this.loading = true;\r\n      axios\r\n        .post(\"/api/mails/add\", this.mail)\r\n        .then((res) => {\r\n          if (this.files.length > 0) this.saveAttachments(res.data);\r\n          else this.sendMail(res.data);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          this.loading = false;\r\n          this.$store.commit(\"setSnackbar\", \"Przepraszamy, błąd serwera...\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Mails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Mails.vue?vue&type=template&id=a2219456&\"\nimport script from \"./Mails.vue?vue&type=script&lang=js&\"\nexport * from \"./Mails.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["data","users","selectedUsers","search","checkboxes","selectPlayersFlag","watch","computed","likesAllFruit","likesSomeFruit","icon","playersIcon","methods","selectPlayers","getUsers","axios","itemText","toggle","searchUser","user","created","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","on","model","value","callback","$$v","expression","_v","length","_s","staticClass","proxy","ref","item","name","components","VMain","VContainer","VForm","VCardActions","VBtn","VIcon","VDivider","VTextarea","VTextField","VCard","VCardTitle","Select","files","mail","subject","message","newsletter","loading","valid","rules","titleRules","deleteMail","sendMail","i","post","then","console","saveAttachments","formData","saveMail","$set","$event","$router","go"],"sourceRoot":""}